"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{64049:(e,t,r)=>{let n;r.d(t,{$1:()=>eD,$G:()=>N,$u:()=>eI,Ac:()=>_,Ap:()=>l,Eb:()=>B,FS:()=>F,JZ:()=>eN,MT:()=>o,NG:()=>t4,Nx:()=>u,P8:()=>T,Sd:()=>A,U7:()=>R,V:()=>eF,WP:()=>f,Wy:()=>c,YO:()=>td,ab:()=>d,dn:()=>E,fe:()=>ef,gh:()=>J,gv:()=>j,hv:()=>ej,nK:()=>eM,rF:()=>g,tT:()=>S,yL:()=>U});var i,a,o,s,_,E,u,l,R,c,T,A,f,d,p,h,S,N,B,C,F,g,O,m,I,M,U,L,D,P,v,G,b=r(46334),y=r(9410),x=r(94539),X=r(26075),w=r(98388);function W(e,t,r){return e<<16|t<<8|r}function H(e){return e>>>8&255}function V(e){return e>>>16&255}function k(e){switch(e){case m.F32:case m.U32:case m.S32:return 4;case m.U16:case m.S16:case m.F16:return 2;case m.U8:case m.S8:return 1;default:throw Error("whoops")}}function Y(e){var t=255&e;if(t&M.Depth)return C.Depth;if(t&M.Normalized)return C.Float;var r=V(e);if(r===m.F16||r===m.F32)return C.Float;if(r===m.U8||r===m.U16||r===m.U32)return C.Uint;if(r===m.S8||r===m.S16||r===m.S32)return C.Sint;throw Error("whoops")}function K(e,t){if(void 0===t&&(t=""),!e)throw Error("Assert fail: ".concat(t))}function z(e){if(null!=e)return e;throw Error("Missing object")}function q(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function Z(e,t){e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a}function Q(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}function j(e,t,r,n){return void 0===n&&(n=1),{r:e,g:t,b:r,a:n}}!function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=0xffffffff]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"}(i||(i={})),function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool",e[e.RenderBundle=11]="RenderBundle"}(a||(a={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(o||(o={})),function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"}(s||(s={})),function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"}(_||(_={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"}(E||(E={})),function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"}(u||(u={})),function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"}(l||(l={})),function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"}(R||(R={})),function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"}(c||(c={})),function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"}(T||(T={})),function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"}(A||(A={})),function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"}(f||(f={})),function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"}(d||(d={})),(p||(p={})).LOADED="loaded",function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"}(h||(h={})),function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET",e[e.STORAGE=4]="STORAGE"}(S||(S={})),function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"}(N||(N={})),function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"}(B||(B={})),!function(e){e[e.Float=0]="Float",e[e.UnfilterableFloat=1]="UnfilterableFloat",e[e.Uint=2]="Uint",e[e.Sint=3]="Sint",e[e.Depth=4]="Depth"}(C||(C={})),function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"}(F||(F={})),function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"}(g||(g={})),function(e){e[e.OcclusionConservative=0]="OcclusionConservative"}(O||(O={})),function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"}(m||(m={})),function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"}(I||(I={})),function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"}(M||(M={})),function(e){e[e.ALPHA=W(m.U8,I.A,M.None)]="ALPHA",e[e.U8_LUMINANCE=W(m.U8,I.A,M.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=W(m.F16,I.A,M.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=W(m.F32,I.A,M.Luminance)]="F32_LUMINANCE",e[e.F16_R=W(m.F16,I.R,M.None)]="F16_R",e[e.F16_RG=W(m.F16,I.RG,M.None)]="F16_RG",e[e.F16_RGB=W(m.F16,I.RGB,M.None)]="F16_RGB",e[e.F16_RGBA=W(m.F16,I.RGBA,M.None)]="F16_RGBA",e[e.F32_R=W(m.F32,I.R,M.None)]="F32_R",e[e.F32_RG=W(m.F32,I.RG,M.None)]="F32_RG",e[e.F32_RGB=W(m.F32,I.RGB,M.None)]="F32_RGB",e[e.F32_RGBA=W(m.F32,I.RGBA,M.None)]="F32_RGBA",e[e.U8_R=W(m.U8,I.R,M.None)]="U8_R",e[e.U8_R_NORM=W(m.U8,I.R,M.Normalized)]="U8_R_NORM",e[e.U8_RG=W(m.U8,I.RG,M.None)]="U8_RG",e[e.U8_RG_NORM=W(m.U8,I.RG,M.Normalized)]="U8_RG_NORM",e[e.U8_RGB=W(m.U8,I.RGB,M.None)]="U8_RGB",e[e.U8_RGB_NORM=W(m.U8,I.RGB,M.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=W(m.U8,I.RGB,M.sRGB|M.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=W(m.U8,I.RGBA,M.None)]="U8_RGBA",e[e.U8_RGBA_NORM=W(m.U8,I.RGBA,M.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=W(m.U8,I.RGBA,M.sRGB|M.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=W(m.U16,I.R,M.None)]="U16_R",e[e.U16_R_NORM=W(m.U16,I.R,M.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=W(m.U16,I.RG,M.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=W(m.U16,I.RGBA,M.Normalized)]="U16_RGBA_NORM",e[e.U16_RGBA=W(m.U16,I.RGBA,M.None)]="U16_RGBA",e[e.U16_RGB=W(m.U16,I.RGB,M.None)]="U16_RGB",e[e.U16_RG=W(m.U16,I.RG,M.None)]="U16_RG",e[e.U32_R=W(m.U32,I.R,M.None)]="U32_R",e[e.U32_RG=W(m.U32,I.RG,M.None)]="U32_RG",e[e.U32_RGB=W(m.U32,I.RGB,M.None)]="U32_RGB",e[e.U32_RGBA=W(m.U32,I.RGBA,M.None)]="U32_RGBA",e[e.S8_R=W(m.S8,I.R,M.None)]="S8_R",e[e.S8_R_NORM=W(m.S8,I.R,M.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=W(m.S8,I.RG,M.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=W(m.S8,I.RGB,M.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=W(m.S8,I.RGBA,M.Normalized)]="S8_RGBA_NORM",e[e.S16_R=W(m.S16,I.R,M.None)]="S16_R",e[e.S16_RG=W(m.S16,I.RG,M.None)]="S16_RG",e[e.S16_RG_NORM=W(m.S16,I.RG,M.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=W(m.S16,I.RGB,M.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=W(m.S16,I.RGBA,M.None)]="S16_RGBA",e[e.S16_RGBA_NORM=W(m.S16,I.RGBA,M.Normalized)]="S16_RGBA_NORM",e[e.S32_R=W(m.S32,I.R,M.None)]="S32_R",e[e.S32_RG=W(m.S32,I.RG,M.None)]="S32_RG",e[e.S32_RGB=W(m.S32,I.RGB,M.None)]="S32_RGB",e[e.S32_RGBA=W(m.S32,I.RGBA,M.None)]="S32_RGBA",e[e.U16_RGBA_5551=W(m.U16_PACKED_5551,I.RGBA,M.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=W(m.U16_PACKED_565,I.RGB,M.Normalized)]="U16_RGB_565",e[e.BC1=W(m.BC1,I.RGBA,M.Normalized)]="BC1",e[e.BC1_SRGB=W(m.BC1,I.RGBA,M.Normalized|M.sRGB)]="BC1_SRGB",e[e.BC2=W(m.BC2,I.RGBA,M.Normalized)]="BC2",e[e.BC2_SRGB=W(m.BC2,I.RGBA,M.Normalized|M.sRGB)]="BC2_SRGB",e[e.BC3=W(m.BC3,I.RGBA,M.Normalized)]="BC3",e[e.BC3_SRGB=W(m.BC3,I.RGBA,M.Normalized|M.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=W(m.BC4_UNORM,I.R,M.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=W(m.BC4_SNORM,I.R,M.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=W(m.BC5_UNORM,I.RG,M.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=W(m.BC5_SNORM,I.RG,M.Normalized)]="BC5_SNORM",e[e.D24=W(m.D24,I.R,M.Depth)]="D24",e[e.D24_S8=W(m.D24S8,I.RG,M.Depth|M.Stencil)]="D24_S8",e[e.D32F=W(m.D32F,I.R,M.Depth)]="D32F",e[e.D32F_S8=W(m.D32FS8,I.RG,M.Depth|M.Stencil)]="D32F_S8",e[e.U8_RGB_RT=W(m.U8,I.RGB,M.RenderTarget|M.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=W(m.U8,I.RGBA,M.RenderTarget|M.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=W(m.U8,I.RGBA,M.RenderTarget|M.Normalized|M.sRGB)]="U8_RGBA_RT_SRGB"}(U||(U={}));var J=j(0,0,0,0);j(0,0,0,1);var $=j(1,1,1,0);function ee(e){return!!(e&&(e&e-1)==0)}function et(e,t){return null!=e?e:t}function er(e,t){var r=t-1;return e+r&~r}function en(e,t){e.blendDstFactor=t.blendDstFactor,e.blendSrcFactor=t.blendSrcFactor,e.blendMode=t.blendMode}function ei(e,t){return void 0===e&&(e={}),e.compare=t.compare,e.depthFailOp=t.depthFailOp,e.passOp=t.passOp,e.failOp=t.failOp,e.mask=t.mask,e}function ea(e,t){return void 0===e&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),en(e.rgbBlendState,t.rgbBlendState),en(e.alphaBlendState,t.alphaBlendState),e.channelWriteMask=t.channelWriteMask,e}function eo(e,t){e.length!==t.length&&(e.length=t.length);for(var r=0;r<t.length;r++)e[r]=ea(e[r],t[r])}function es(e){var t=Object.assign({},e);return t.attachmentsState=[],eo(t.attachmentsState,e.attachmentsState),t.blendConstant=t.blendConstant&&Q(t.blendConstant),t.stencilFront=ei(void 0,e.stencilFront),t.stencilBack=ei(void 0,e.stencilBack),t}j(1,1,1,1);var e_={blendMode:u.ADD,blendSrcFactor:E.ONE,blendDstFactor:E.ZERO},eE={attachmentsState:[{channelWriteMask:N.ALL,rgbBlendState:e_,alphaBlendState:e_}],blendConstant:Q(J),depthWrite:!0,depthCompare:o.LEQUAL,stencilWrite:!1,stencilFront:{compare:o.ALWAYS,passOp:B.KEEP,depthFailOp:B.KEEP,failOp:B.KEEP},stencilBack:{compare:o.ALWAYS,passOp:B.KEEP,depthFailOp:B.KEEP,failOp:B.KEEP},cullMode:_.NONE,frontFace:s.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};!function(e,t){void 0===e&&(e=null),void 0===t&&(t=eE);var r,n=es(t);null!==e&&(void 0!==(r=e).attachmentsState&&eo(n.attachmentsState,r.attachmentsState),n.blendConstant&&r.blendConstant&&Z(n.blendConstant,r.blendConstant),n.depthCompare=et(r.depthCompare,n.depthCompare),n.depthWrite=et(r.depthWrite,n.depthWrite),n.stencilWrite=et(r.stencilWrite,n.stencilWrite),n.stencilFront&&r.stencilFront&&ei(n.stencilFront,r.stencilFront),n.stencilBack&&r.stencilBack&&ei(n.stencilBack,r.stencilBack),n.cullMode=et(r.cullMode,n.cullMode),n.frontFace=et(r.frontFace,n.frontFace),n.polygonOffset=et(r.polygonOffset,n.polygonOffset),n.polygonOffsetFactor=et(r.polygonOffsetFactor,n.polygonOffsetFactor),n.polygonOffsetUnits=et(r.polygonOffsetUnits,n.polygonOffsetUnits))}({depthCompare:o.ALWAYS,depthWrite:!1},eE);var eu={texture:null,sampler:null,formatKind:C.Float,dimension:h.TEXTURE_2D};function el(e,t,r){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function eR(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n]);return r}function ec(e,t){return e.texture===t.texture&&e.binding===t.binding}function eT(e,t){return e.buffer===t.buffer&&e.size===t.size&&e.binding===t.binding&&e.offset===t.offset}function eA(e,t){return null===e?null===t:null!==t&&e.sampler===t.sampler&&e.texture===t.texture&&e.dimension===t.dimension&&e.formatKind===t.formatKind&&e.comparison===t.comparison}function ef(e,t){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],!!(e.samplerBindings.length===t.samplerBindings.length&&el(e.samplerBindings,t.samplerBindings,eA)&&el(e.uniformBufferBindings,t.uniformBufferBindings,eT)&&el(e.storageBufferBindings,t.storageBufferBindings,eT)&&el(e.storageTextureBindings,t.storageTextureBindings,ec))}function ed(e,t){return e.blendMode==t.blendMode&&e.blendSrcFactor===t.blendSrcFactor&&e.blendDstFactor===t.blendDstFactor}function ep(e,t){return!!(ed(e.rgbBlendState,t.rgbBlendState)&&ed(e.alphaBlendState,t.alphaBlendState))&&e.channelWriteMask===t.channelWriteMask}function eh(e,t){return e.compare==t.compare&&e.depthFailOp===t.depthFailOp&&e.failOp===t.failOp&&e.passOp===t.passOp&&e.mask===t.mask}function eS(e,t){return e===t}function eN(e,t){var r,n,i,a;return e.topology===t.topology&&e.inputLayout===t.inputLayout&&e.sampleCount===t.sampleCount&&(!e.megaStateDescriptor||!t.megaStateDescriptor||(r=e.megaStateDescriptor,n=t.megaStateDescriptor,!!(el(r.attachmentsState,n.attachmentsState,ep)&&(!r.blendConstant||!n.blendConstant||q(r.blendConstant,n.blendConstant))&&(!r.stencilFront||!n.stencilFront||eh(r.stencilFront,n.stencilFront))&&(!r.stencilBack||!n.stencilBack||eh(r.stencilBack,n.stencilBack)))&&r.depthCompare===n.depthCompare&&r.depthWrite===n.depthWrite&&r.stencilWrite===n.stencilWrite&&r.cullMode===n.cullMode&&r.frontFace===n.frontFace&&r.polygonOffset===n.polygonOffset&&r.polygonOffsetFactor===n.polygonOffsetFactor&&r.polygonOffsetUnits===n.polygonOffsetUnits))&&(i=e.program,a=t.program,!!(i.id===a.id&&el(e.colorAttachmentFormats,t.colorAttachmentFormats,eS))&&e.depthStencilAttachmentFormat===t.depthStencilAttachmentFormat)}function eB(e,t){return e.offset===t.offset&&e.shaderLocation===t.shaderLocation&&e.format===t.format&&e.divisor===t.divisor}function eC(e,t){return(0,b.A)(e)?(0,b.A)(t):!(0,b.A)(t)&&e.arrayStride===t.arrayStride&&e.stepMode===t.stepMode&&el(e.attributes,t.attributes,eB)}function eF(e,t){var r,n;return!!(e.indexBufferFormat===t.indexBufferFormat&&el(e.vertexBufferDescriptors,t.vertexBufferDescriptors,eC))&&(r=e.program,n=t.program,r.id===n.id)}function eg(e){return{sampler:e.sampler,texture:e.texture,dimension:e.dimension,formatKind:e.formatKind,comparison:e.comparison}}function eO(e){var t=e.buffer,r=e.size;return{binding:e.binding,buffer:t,offset:e.offset,size:r}}function em(e){return{binding:e.binding,texture:e.texture}}function eI(e){return{samplerBindings:e.samplerBindings&&eR(e.samplerBindings,eg),uniformBufferBindings:e.uniformBufferBindings&&eR(e.uniformBufferBindings,eO),storageBufferBindings:e.storageBufferBindings&&eR(e.storageBufferBindings,eO),storageTextureBindings:e.storageTextureBindings&&eR(e.storageTextureBindings,em),pipeline:e.pipeline}}function eM(e){var t=e.inputLayout,r=e.program,n=e.topology;return{inputLayout:t,megaStateDescriptor:e.megaStateDescriptor&&es(e.megaStateDescriptor),program:r,topology:n,colorAttachmentFormats:e.colorAttachmentFormats.slice(),depthStencilAttachmentFormat:e.depthStencilAttachmentFormat,sampleCount:e.sampleCount}}function eU(e){return{shaderLocation:e.shaderLocation,format:e.format,offset:e.offset,divisor:e.divisor}}function eL(e){return(0,b.A)(e)?e:{arrayStride:e.arrayStride,stepMode:e.stepMode,attributes:eR(e.attributes,eU)}}function eD(e){return{vertexBufferDescriptors:eR(e.vertexBufferDescriptors,eL),indexBufferFormat:e.indexBufferFormat,program:e.program}}var eP=/([^[]*)(\[[0-9]+\])?/;function ev(){var e=null;return function(t,r,n){var i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function eG(e,t,r,n){var i=null,a=null;return function(o,s,_){var E=t(_,r),u=E.length,l=!1;if(null===i)i=new Float32Array(u),a=u,l=!0;else{K(a===u,"Uniform length cannot change.");for(var R=0;R<u;++R)if(E[R]!==i[R]){l=!0;break}}return l&&(n(o,e,s,E),i.set(E)),l}}function eb(e,t,r,n){e[t](r,n)}function ey(e,t,r,n){e[t](r,!1,n)}var ex={},eX={},ew={},eW=[0];function eH(e,t,r,n){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(eW[0]=e,e=eW);var i=e.length;if(e instanceof r)return e;var a=n[i];a||(a=new r(i),n[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function eV(e,t){return eH(e,t,Float32Array,ex)}function ek(e,t){return eH(e,t,Int32Array,eX)}function eY(e,t){return eH(e,t,Uint32Array,ew)}var eK=((L={})[i.FLOAT]=eG.bind(null,"uniform1fv",eV,1,eb),L[i.FLOAT_VEC2]=eG.bind(null,"uniform2fv",eV,2,eb),L[i.FLOAT_VEC3]=eG.bind(null,"uniform3fv",eV,3,eb),L[i.FLOAT_VEC4]=eG.bind(null,"uniform4fv",eV,4,eb),L[i.INT]=eG.bind(null,"uniform1iv",ek,1,eb),L[i.INT_VEC2]=eG.bind(null,"uniform2iv",ek,2,eb),L[i.INT_VEC3]=eG.bind(null,"uniform3iv",ek,3,eb),L[i.INT_VEC4]=eG.bind(null,"uniform4iv",ek,4,eb),L[i.BOOL]=eG.bind(null,"uniform1iv",ek,1,eb),L[i.BOOL_VEC2]=eG.bind(null,"uniform2iv",ek,2,eb),L[i.BOOL_VEC3]=eG.bind(null,"uniform3iv",ek,3,eb),L[i.BOOL_VEC4]=eG.bind(null,"uniform4iv",ek,4,eb),L[i.FLOAT_MAT2]=eG.bind(null,"uniformMatrix2fv",eV,4,ey),L[i.FLOAT_MAT3]=eG.bind(null,"uniformMatrix3fv",eV,9,ey),L[i.FLOAT_MAT4]=eG.bind(null,"uniformMatrix4fv",eV,16,ey),L[i.UNSIGNED_INT]=eG.bind(null,"uniform1uiv",eY,1,eb),L[i.UNSIGNED_INT_VEC2]=eG.bind(null,"uniform2uiv",eY,2,eb),L[i.UNSIGNED_INT_VEC3]=eG.bind(null,"uniform3uiv",eY,3,eb),L[i.UNSIGNED_INT_VEC4]=eG.bind(null,"uniform4uiv",eY,4,eb),L[i.FLOAT_MAT2x3]=eG.bind(null,"uniformMatrix2x3fv",eV,6,ey),L[i.FLOAT_MAT2x4]=eG.bind(null,"uniformMatrix2x4fv",eV,8,ey),L[i.FLOAT_MAT3x2]=eG.bind(null,"uniformMatrix3x2fv",eV,6,ey),L[i.FLOAT_MAT3x4]=eG.bind(null,"uniformMatrix3x4fv",eV,12,ey),L[i.FLOAT_MAT4x2]=eG.bind(null,"uniformMatrix4x2fv",eV,8,ey),L[i.FLOAT_MAT4x3]=eG.bind(null,"uniformMatrix4x3fv",eV,12,ey),L[i.SAMPLER_2D]=ev,L[i.SAMPLER_CUBE]=ev,L[i.SAMPLER_3D]=ev,L[i.SAMPLER_2D_SHADOW]=ev,L[i.SAMPLER_2D_ARRAY]=ev,L[i.SAMPLER_2D_ARRAY_SHADOW]=ev,L[i.SAMPLER_CUBE_SHADOW]=ev,L[i.INT_SAMPLER_2D]=ev,L[i.INT_SAMPLER_3D]=ev,L[i.INT_SAMPLER_CUBE]=ev,L[i.INT_SAMPLER_2D_ARRAY]=ev,L[i.UNSIGNED_INT_SAMPLER_2D]=ev,L[i.UNSIGNED_INT_SAMPLER_3D]=ev,L[i.UNSIGNED_INT_SAMPLER_CUBE]=ev,L[i.UNSIGNED_INT_SAMPLER_2D_ARRAY]=ev,L);function ez(e,t,r){var n=eK[r.type];if(!n)throw Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}var eq={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function eZ(e,t){return"#define ".concat(e," ").concat(t)}function eQ(e){if(void 0===e)return null;var t=/binding\s*=\s*(\d+)/.exec(e);if(null!==t){var r=parseInt(t[1],10);if(!Number.isNaN(r))return r}return null}function ej(e,t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=!0);var a="#version 100"===e.glslVersion,o="frag"===t&&(null===(p=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))||void 0===p?void 0:p.length)>1,s=r.replace("\r\n","\n").split("\n").map(function(e){return e.replace(/[/][/].*$/,"")}).filter(function(e){return!(!e||/^\s+$/.test(e))}),_="";null!==n&&(_=Object.keys(n).map(function(e){return eZ(e,n[e])}).join("\n"));var E=s.find(function(e){return e.startsWith("precision")})||"precision mediump float;",u=i?s.filter(function(e){return!e.startsWith("precision")}).join("\n"):s.join("\n"),l="";if(e.viewportOrigin===F.UPPER_LEFT&&(l+="".concat(eZ("VIEWPORT_ORIGIN_TL","1"),"\n")),e.clipSpaceNearZ===g.ZERO&&(l+="".concat(eZ("CLIPSPACE_NEAR_ZERO","1"),"\n")),e.explicitBindingLocations){var R=0,c=0,T=0;u=u.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(e,t,r,n){return"layout(".concat(r?"".concat(r,", "):"","set = ").concat(R,", binding = ").concat(c++,") uniform ").concat(n)}),R++,c=0,K(e.separateSamplerTextures),u=(u=u.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(e,r,n,i,a){var o=eQ(n);null===o&&(o=c++);var s=(0,X.zs)([i,""],2),_=s[0],E=s[1];return"frag"===t?"\nlayout(set = ".concat(R,", binding = ").concat(2*o+0,") uniform texture").concat(_," T_").concat(a,";\nlayout(set = ").concat(R,", binding = ").concat(2*o+1,") uniform sampler").concat(E," S_").concat(a,";").trim():""})).replace("frag"===t?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(e,t){return"layout(location = ".concat(T++,") ").concat(t)}),l+="".concat(eZ("gl_VertexID","gl_VertexIndex"),"\n"),l+="".concat(eZ("gl_InstanceID","gl_InstanceIndex"),"\n"),E=E.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var A=0;u=u.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(e,t,r,n,i){var a=eQ(r);return null===a&&(a=A++),"uniform sampler".concat(n," ").concat(i,"; // BINDING=").concat(a)})}if(u=(u=(u=u.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"SAMPLER_".concat(t,"(P_").concat(r,")")})).replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"PP_SAMPLER_".concat(t,"(P_").concat(r,")")})).replace(/\bPU_TEXTURE\((.*?)\)/g,function(e,t){return"TEXTURE(P_".concat(t,")")}),e.separateSamplerTextures)u=(u=(u=(u=u.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){var n=(0,X.zs)([t,""],2),i=n[0],a=n[1];return"texture".concat(i," T_P_").concat(r,", sampler").concat(a," S_P_").concat(r)})).replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"T_".concat(r,", S_").concat(r)})).replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"sampler".concat(t,"(T_").concat(r,", S_").concat(r,")")})).replace(/\bTEXTURE\((.*?)\)/g,function(e,t){return"T_".concat(t)});else{var f=[];u=(u=(u=u.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return"sampler".concat(t," P_").concat(r)})).replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return r})).replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(e,t,r){return f.push([r,t]),r}),a&&f.forEach(function(e){var t=(0,X.zs)(e,2),r=t[0],n=t[1];u=u.replace(RegExp("texture\\(".concat(r),"g"),function(){return"texture".concat(n,"(").concat(r)})}),u=u.replace(/\bTEXTURE\((.*?)\)/g,function(e,t){return t})}var d="".concat(a?"":e.glslVersion,"\n").concat(a&&o?"#extension GL_EXT_draw_buffers : require\n":"","\n").concat(a&&"frag"===t?"#extension GL_OES_standard_derivatives : enable\n":"").concat(i?E:"","\n").concat(l||"").concat(_?_+"\n":"","\n").concat(u,"\n").trim();if(e.explicitBindingLocations&&"frag"===t&&(d=d.replace(/^\b(out)\b/g,function(e,t){return"layout(location = 0) ".concat(t)})),a){if("frag"===t&&(d=d.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(e,t,r){return"varying ".concat(t," ").concat(r,";\n")})),"vert"===t&&(d=(d=d.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(e,t,r){return"varying ".concat(t," ").concat(r,";\n")})).replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(e,t,r){return"attribute ".concat(t," ").concat(r,";\n")})),d=d.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(e,t){return t.trim().replace(/^.*$/gm,function(e){var t=e.trim();return t.startsWith("#")?t:e?"uniform ".concat(t):""})}),"frag"===t){if(o){var p,h,S=[],N=(d=d.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(e,t){return S.push(t),"vec4 ".concat(t,";\n")})).lastIndexOf("}");d=d.substring(0,N)+"\n    ".concat(S.map(function(e,t){return"gl_FragData[".concat(t,"] = ").concat(e,";\n    ")}).join("\n"))+d.substring(N)}else if(d=d.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(e,t,r){return h=r,"".concat(t," ").concat(r,";\n")}),h){var N=d.lastIndexOf("}");d=d.substring(0,N)+"\n  gl_FragColor = vec4(".concat(h,");\n")+d.substring(N)}}d=d.replace(/^\s*layout\((.*)\)/gm,"")}return d}var eJ=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this)||this;return i.id=r,i.device=n,null!==i.device.resourceCreationTracker&&i.device.resourceCreationTracker.trackResourceCreated(i),i}return(0,X.C6)(t,e),t.prototype.destroy=function(){null!==this.device.resourceCreationTracker&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},t}(w.A),e$=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=e.call(this,{id:r,device:n})||this;o.type=a.Bindings;var s=i.uniformBufferBindings,_=i.samplerBindings;return o.uniformBufferBindings=s||[],o.samplerBindings=_||[],o.bindingLayouts=o.createBindingLayouts(),o}return(0,X.C6)(t,e),t.prototype.createBindingLayouts=function(){var e=0,t=0,r=[],n=this.uniformBufferBindings.length,i=this.samplerBindings.length;return r.push({firstUniformBuffer:e,numUniformBuffers:n,firstSampler:t,numSamplers:i}),{numUniformBuffers:e+=n,numSamplers:t+=i,bindingLayoutTables:r}},t}(eJ);function e3(e){return void 0!==D?D:"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?(D=!0,!0):D=!!(e&&2===e._version)}function e0(e){switch(V(e)){case m.BC1:case m.BC2:case m.BC3:case m.BC4_UNORM:case m.BC4_SNORM:case m.BC5_UNORM:case m.BC5_SNORM:return!0;default:return!1}}function e1(e){if(255&e&M.Normalized)return!1;var t=V(e);return t===m.S8||t===m.S16||t===m.S32||t===m.U8||t===m.U16||t===m.U32}function e2(e){return e&A.INDEX?i.ELEMENT_ARRAY_BUFFER:e&A.VERTEX?i.ARRAY_BUFFER:e&A.UNIFORM?i.UNIFORM_BUFFER:void 0}function e6(e){switch(e){case l.CLAMP_TO_EDGE:return i.CLAMP_TO_EDGE;case l.REPEAT:return i.REPEAT;case l.MIRRORED_REPEAT:return i.MIRRORED_REPEAT;default:throw Error("whoops")}}function e8(e,t){if(t===c.LINEAR&&e===R.BILINEAR)return i.LINEAR_MIPMAP_LINEAR;if(t===c.LINEAR&&e===R.POINT)return i.NEAREST_MIPMAP_LINEAR;if(t===c.NEAREST&&e===R.BILINEAR)return i.LINEAR_MIPMAP_NEAREST;if(t===c.NEAREST&&e===R.POINT)return i.NEAREST_MIPMAP_NEAREST;if(t===c.NO_MIP&&e===R.BILINEAR)return i.LINEAR;if(t===c.NO_MIP&&e===R.POINT)return i.NEAREST;throw Error("Unknown texture filter mode")}function e4(e,t){return void 0===t&&(t=0),e.gl_buffer_pages[t/e.pageByteSize|0]}function e5(e){return e.gl_texture}function e7(e){return e.gl_sampler}function e9(e,t){e.name=t,e.__SPECTOR_Metadata={name:t}}function te(e,t){for(var r=[];;){var n=t.exec(e);if(!n)break;r.push(n)}return r}function tt(e){return e.blendMode==u.ADD&&e.blendSrcFactor==E.ONE&&e.blendDstFactor===E.ZERO}var tr=function(e){function t(t){var r,n=t.id,i=t.device,o=t.descriptor,s=e.call(this,{id:n,device:i})||this;s.type=a.Buffer;var _=o.viewOrSize,E=o.usage,u=o.hint,l=void 0===u?f.STATIC:u,R=i.uniformBufferMaxPageByteSize,c=i.gl,T=E&A.UNIFORM;T||(e3(c)?c.bindVertexArray(null):i.OES_vertex_array_object.bindVertexArrayOES(null));var d=(0,y.A)(_)?er(_,4):er(_.byteLength,4);if(s.gl_buffer_pages=[],T){for(var p=d;p>0;)s.gl_buffer_pages.push(s.createBufferPage(Math.min(p,R),E,l)),p-=R;r=R}else s.gl_buffer_pages.push(s.createBufferPage(d,E,l)),r=d;return s.pageByteSize=r,s.byteSize=d,s.usage=E,s.gl_target=e2(E),(0,y.A)(_)||s.setSubData(0,new Uint8Array(_.buffer)),T||(e3(c)?c.bindVertexArray(s.device.currentBoundVAO):i.OES_vertex_array_object.bindVertexArrayOES(s.device.currentBoundVAO)),s}return(0,X.C6)(t,e),t.prototype.setSubData=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=t.byteLength-r);for(var i=this.device.gl,a=this.pageByteSize,o=e+n,s=e,_=e%a;s<o;){var E=e3(i)?i.COPY_WRITE_BUFFER:this.gl_target,u=e4(this,s);if(u.ubo)return;i.bindBuffer(E,u),e3(i)?i.bufferSubData(E,_,t,r,Math.min(o-s,a)):i.bufferSubData(E,_,t),s+=a,_=0,r+=a,this.device.debugGroupStatisticsBufferUpload()}},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.gl_buffer_pages.length;t++)this.gl_buffer_pages[t].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[t]);this.gl_buffer_pages=[]},t.prototype.createBufferPage=function(e,t,r){var n=this.device.gl,a=t&A.UNIFORM;if(!e3(n)&&a)return{ubo:!0};var o=this.device.ensureResourceExists(n.createBuffer()),s=e2(t),_=function(e){switch(e){case f.STATIC:return i.STATIC_DRAW;case f.DYNAMIC:return i.DYNAMIC_DRAW}}(r);return n.bindBuffer(s,o),n.bufferData(s,e,_),o},t}(eJ),tn=function(e){function t(t){var r,n,o,s,_,E=t.id,u=t.device,l=t.descriptor,R=e.call(this,{id:E,device:u})||this;R.type=a.InputLayout;var c=l.vertexBufferDescriptors,T=l.indexBufferFormat,A=l.program;K(T===U.U16_R||T===U.U32_R||null===T);var f=null!==T?function(e){switch(e){case U.U8_R:return i.UNSIGNED_BYTE;case U.U16_R:return i.UNSIGNED_SHORT;case U.U32_R:return i.UNSIGNED_INT;default:throw Error("whoops")}}(T):null,p=null!==T?k(V(T)):null,h=R.device.gl,S=R.device.ensureResourceExists(e3(h)?h.createVertexArray():u.OES_vertex_array_object.createVertexArrayOES());e3(h)?h.bindVertexArray(S):u.OES_vertex_array_object.bindVertexArrayOES(S),h.bindBuffer(h.ARRAY_BUFFER,e4(R.device.fallbackVertexBuffer));try{for(var N=(0,X.Ju)(l.vertexBufferDescriptors),B=N.next();!B.done;B=N.next()){var C=B.value,F=C.stepMode,g=C.attributes;try{for(var O=(o=void 0,(0,X.Ju)(g)),L=O.next();!L.done;L=O.next()){var D=L.value,P=D.shaderLocation,v=D.format,G=D.divisor,y=void 0===G?1:G,x=e3(h)?P:null===(_=A.attributes[P])||void 0===_?void 0:_.location,w=function(e){var t=V(e),r=H(e),n=255&e,a=function(e){switch(e){case m.U8:return i.UNSIGNED_BYTE;case m.U16:return i.UNSIGNED_SHORT;case m.U32:return i.UNSIGNED_INT;case m.S8:return i.BYTE;case m.S16:return i.SHORT;case m.S32:return i.INT;case m.F16:return i.HALF_FLOAT;case m.F32:return i.FLOAT;default:throw Error("whoops")}}(t);return{size:function(e){switch(e){case I.R:return 1;case I.RG:return 2;case I.RGB:return 3;case I.RGBA:return 4;default:return 1}}(r),type:a,normalized:!!(n&M.Normalized)}}(v);if(D.vertexFormat=w,!(0,b.A)(x)){e1(v);var W=w.size,Y=w.type,z=w.normalized;h.vertexAttribPointer(x,W,Y,z,0,0),F===d.INSTANCE&&(e3(h)?h.vertexAttribDivisor(x,y):u.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(x,y)),h.enableVertexAttribArray(x)}}}catch(e){o={error:e}}finally{try{L&&!L.done&&(s=O.return)&&s.call(O)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{B&&!B.done&&(n=N.return)&&n.call(N)}finally{if(r)throw r.error}}return e3(h)?h.bindVertexArray(null):u.OES_vertex_array_object.bindVertexArrayOES(null),R.vertexBufferDescriptors=c,R.vao=S,R.indexBufferFormat=T,R.indexBufferType=f,R.indexBufferCompByteSize=p,R.program=A,R}return(0,X.C6)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(e3(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},t}(eJ),ti=function(e){function t(t){var r,n,o=t.id,s=t.device,_=t.descriptor,E=t.fake,u=e.call(this,{id:o,device:s})||this;u.type=a.Texture,_=(0,X.Cl)({dimension:h.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},_);var l=u.device.gl,R=u.clampmipLevelCount(_);if(u.immutable=_.usage===S.RENDER_TARGET,u.pixelStore=_.pixelStore,u.format=_.format,u.dimension=_.dimension,u.formatKind=Y(_.format),u.width=_.width,u.height=_.height,u.depthOrArrayLayers=_.depthOrArrayLayers,u.mipmaps=R>=1,!E){n=u.device.ensureResourceExists(l.createTexture());var c=u.device.translateTextureType(_.format),T=u.device.translateTextureInternalFormat(_.format);if(u.device.setActiveTexture(l.TEXTURE0),u.device.currentTextures[0]=null,u.preprocessImage(),_.dimension===h.TEXTURE_2D){if(r=i.TEXTURE_2D,l.bindTexture(r,n),u.immutable){if(e3(l))l.texStorage2D(r,R,T,_.width,_.height);else{var A=(T===i.DEPTH_COMPONENT||u.isNPOT(),0);(u.format!==U.D32F&&u.format!==U.D24_S8||e3(l)||s.WEBGL_depth_texture)&&(l.texImage2D(r,A,T,_.width,_.height,0,T,c,null),u.mipmaps&&(u.mipmaps=!1,l.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),l.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),l.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)))}}K(1===_.depthOrArrayLayers)}else if(_.dimension===h.TEXTURE_2D_ARRAY)r=i.TEXTURE_2D_ARRAY,l.bindTexture(r,n),u.immutable&&e3(l)&&l.texStorage3D(r,R,T,_.width,_.height,_.depthOrArrayLayers);else if(_.dimension===h.TEXTURE_3D)r=i.TEXTURE_3D,l.bindTexture(r,n),u.immutable&&e3(l)&&l.texStorage3D(r,R,T,_.width,_.height,_.depthOrArrayLayers);else if(_.dimension===h.TEXTURE_CUBE_MAP)r=i.TEXTURE_CUBE_MAP,l.bindTexture(r,n),u.immutable&&e3(l)&&l.texStorage2D(r,R,T,_.width,_.height),K(6===_.depthOrArrayLayers);else throw Error("whoops")}return u.gl_texture=n,u.gl_target=r,u.mipLevelCount=R,u}return(0,X.C6)(t,e),t.prototype.setImageData=function(e,t){void 0===t&&(t=0);var r,n,a,o=this.device.gl;e0(this.format);var s=this.gl_target===i.TEXTURE_3D||this.gl_target===i.TEXTURE_2D_ARRAY,_=this.gl_target===i.TEXTURE_CUBE_MAP,E=(r=e[0],Object.prototype.toString.call(r)in eq);this.device.setActiveTexture(o.TEXTURE0),this.device.currentTextures[0]=null;var u=e[0];E?(n=this.width,a=this.height):(n=u.width,a=u.height,this.width=n,this.height=a),o.bindTexture(this.gl_target,this.gl_texture);var l=this.device.translateTextureFormat(this.format),R=e3(o)?this.device.translateInternalTextureFormat(this.format):l,c=this.device.translateTextureType(this.format);this.preprocessImage();for(var T=0;T<this.depthOrArrayLayers;T++){var A=e[T],f=this.gl_target;_&&(f=i.TEXTURE_CUBE_MAP_POSITIVE_X+T%6),this.immutable?o.texSubImage2D(f,t,0,0,n,a,l,c,A):e3(o)?s?o.texImage3D(f,t,R,n,a,this.depthOrArrayLayers,0,l,c,A):o.texImage2D(f,t,R,n,a,0,l,c,A):E?o.texImage2D(f,t,l,n,a,0,l,c,A):o.texImage2D(f,t,l,l,c,A)}this.mipmaps&&this.generateMipmap(s)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(e5(this))},t.prototype.clampmipLevelCount=function(e){if(e.dimension===h.TEXTURE_2D_ARRAY&&e.depthOrArrayLayers>1&&V(e.format)===m.BC1)for(var t=e.width,r=e.height,n=0;n<e.mipLevelCount;n++){if(t<=2||r<=2)return n-1;t=Math.max(t/2|0,1),r=Math.max(r/2|0,1)}return e.mipLevelCount},t.prototype.preprocessImage=function(){var e=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&e.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&e.pixelStorei(i.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&e.pixelStorei(i.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},t.prototype.generateMipmap=function(e){void 0===e&&(e=!1);var t=this.device.gl;return!e3(t)&&this.isNPOT()||this.gl_texture&&this.gl_target&&(t.bindTexture(this.gl_target,this.gl_texture),e?(t.texParameteri(this.gl_target,i.TEXTURE_BASE_LEVEL,0),t.texParameteri(this.gl_target,i.TEXTURE_MAX_LEVEL,Math.log2(this.width)),t.texParameteri(this.gl_target,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),t.texParameteri(this.gl_target,i.TEXTURE_MAG_FILTER,i.LINEAR)):t.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST_MIPMAP_LINEAR),t.generateMipmap(this.gl_target),t.bindTexture(this.gl_target,null)),this},t.prototype.isNPOT=function(){return!e3(this.device.gl)&&(!ee(this.width)||!ee(this.height))},t}(eJ),ta=function(e){function t(t){var r=t.id,n=t.device,o=t.descriptor,s=e.call(this,{id:r,device:n})||this;s.type=a.RenderTarget,s.gl_renderbuffer=null,s.texture=null;var _=s.device.gl,E=o.format,u=o.width,l=o.height,R=o.sampleCount,c=void 0===R?1:R,T=o.texture,A=!1;if(E!==U.D32F&&E!==U.D24_S8||!T||e3(_)||n.WEBGL_depth_texture||(T.destroy(),s.texture=null,A=!0),!A&&T)s.texture=T;else{s.gl_renderbuffer=s.device.ensureResourceExists(_.createRenderbuffer()),_.bindRenderbuffer(_.RENDERBUFFER,s.gl_renderbuffer);var f=s.device.translateTextureInternalFormat(E,!0);e3(_)&&c>1?_.renderbufferStorageMultisample(i.RENDERBUFFER,c,f,u,l):_.renderbufferStorage(i.RENDERBUFFER,f,u,l)}return s.format=E,s.width=u,s.height=l,s.sampleCount=c,s}return(0,X.C6)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),null!==this.gl_renderbuffer&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},t}(eJ);!function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"}(P||(P={}));var to=function(e){function t(t,r){var n=t.id,i=t.device,o=t.descriptor,s=e.call(this,{id:n,device:i})||this;s.rawVertexGLSL=r,s.type=a.Program,s.uniformSetters={},s.attributes=[];var _=s.device.gl;return s.descriptor=o,s.gl_program=s.device.ensureResourceExists(_.createProgram()),s.gl_shader_vert=null,s.gl_shader_frag=null,s.compileState=P.NeedsCompile,s.tryCompileProgram(),s}return(0,X.C6)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},t.prototype.tryCompileProgram=function(){K(this.compileState===P.NeedsCompile);var e=this.descriptor,t=e.vertex,r=e.fragment,n=this.device.gl;(null==t?void 0:t.glsl)&&(null==r?void 0:r.glsl)&&(this.gl_shader_vert=this.compileShader(t.postprocess?t.postprocess(t.glsl):t.glsl,n.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(r.postprocess?r.postprocess(r.glsl):r.glsl,n.FRAGMENT_SHADER),n.attachShader(this.gl_program,this.gl_shader_vert),n.attachShader(this.gl_program,this.gl_shader_frag),n.linkProgram(this.gl_program),this.compileState=P.Compiling,e3(n)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},t.prototype.readAttributesFromLinkedProgram=function(){for(var e,t,r,n,i,a=this.device.gl,o=a.getProgramParameter(this.gl_program,a.ACTIVE_ATTRIBUTES),s=(e=this.descriptor.vertex.glsl,t={},e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(e,r,n){var i=Number(n);return t[r]=isNaN(i)?n:i,""}),t),_=(r=this.rawVertexGLSL,n=[],r.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(e,t,r){var i=Number(t);return n.push({location:isNaN(i)?s[t]:i,name:r}),""}),n),E=this,u=0;u<o;u++)!function(e){var t=a.getActiveAttrib(E.gl_program,e),r=t.name,n=t.type,o=t.size,s=a.getAttribLocation(E.gl_program,r),u=null===(i=_.find(function(e){return e.name===r}))||void 0===i?void 0:i.location;s>=0&&!(0,b.A)(u)&&(E.attributes[u]={name:r,location:s,type:n,size:o})}(u)},t.prototype.readUniformLocationsFromLinkedProgram=function(){for(var e=this.device.gl,t=e.getProgramParameter(this.gl_program,e.ACTIVE_UNIFORMS),r=0;r<t;r++){var n=e.getActiveUniform(this.gl_program,r),i=function(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(eP);if(!t||t.length<2)throw Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:Number(t[2])||1,isArray:!!t[2]}}(n.name).name,a=e.getUniformLocation(this.gl_program,i);if(this.uniformSetters[i]=ez(e,a,n),n&&n.size>1)for(var o=0;o<n.size;o++)a=e.getUniformLocation(this.gl_program,"".concat(i,"[").concat(o,"]")),this.uniformSetters["".concat(i,"[").concat(o,"]")]=ez(e,a,n)}},t.prototype.compileShader=function(e,t){var r=this.device.gl,n=this.device.ensureResourceExists(r.createShader(t));return r.shaderSource(n,e),r.compileShader(n),n},t.prototype.setUniformsLegacy=function(e){void 0===e&&(e={});var t=this.device.gl;if(!e3(t)){var r=!1;for(var n in e){r||(t.useProgram(this.gl_program),r=!0);var i=e[n],a=this.uniformSetters[n];if(a){var o=i;o instanceof ti&&(o=o.textureIndex),a(o)}}}return this},t}(eJ),ts=function(e){function t(t){var r=t.id,n=t.device,o=t.descriptor,s=e.call(this,{id:r,device:n})||this;s.type=a.QueryPool;var _=s.device.gl;if(e3(_)){var E=o.elemCount,u=o.type;s.gl_query=function(e,t){for(var r=Array(e),n=0;n<e;n++)r[n]=t();return r}(E,function(){return s.device.ensureResourceExists(_.createQuery())}),s.gl_query_type=function(e){if(e===O.OcclusionConservative)return i.ANY_SAMPLES_PASSED_CONSERVATIVE;throw Error("whoops")}(u)}return s}return(0,X.C6)(t,e),t.prototype.queryResultOcclusion=function(e){var t=this.device.gl;if(e3(t)){var r=this.gl_query[e];return t.getQueryParameter(r,t.QUERY_RESULT_AVAILABLE)?!!t.getQueryParameter(r,t.QUERY_RESULT):null}return null},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=this.device.gl;if(e3(t))for(var r=0;r<this.gl_query.length;r++)t.deleteQuery(this.gl_query[r])},t}(eJ),t_=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this,{id:r,device:n})||this;return i.type=a.Readback,i.gl_pbo=null,i.gl_sync=null,i}return(0,X.C6)(t,e),t.prototype.clientWaitAsync=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=10);var n=this.device.gl;return new Promise(function(i,a){!function o(){var s=n.clientWaitSync(e,t,0);if(s==n.WAIT_FAILED){a();return}if(s==n.TIMEOUT_EXPIRED){setTimeout(o,(0,x.A)(r,0,n.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}i()}()})},t.prototype.getBufferSubDataAsync=function(e,t,r,n,i,a){return(0,X.sH)(this,void 0,void 0,function(){var o;return(0,X.YH)(this,function(s){switch(s.label){case 0:if(!e3(o=this.device.gl))return[3,2];return this.gl_sync=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0),o.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)];case 1:return s.sent(),o.bindBuffer(e,t),o.getBufferSubData(e,r,n,i,a),o.bindBuffer(e,null),[2,n];case 2:return[2]}})})},t.prototype.readTexture=function(e,t,r,n,a,o,s,_){return void 0===s&&(s=0),void 0===_&&(_=o.byteLength||0),(0,X.sH)(this,void 0,void 0,function(){var E,u,l,R,c;return(0,X.YH)(this,function(T){var A;return(E=this.device.gl,u=e,l=this.device.translateTextureFormat(u.format),R=this.device.translateTextureType(u.format),c=k(V(A=u.format))*H(A),e3(E))?(this.gl_pbo=this.device.ensureResourceExists(E.createBuffer()),E.bindBuffer(E.PIXEL_PACK_BUFFER,this.gl_pbo),E.bufferData(E.PIXEL_PACK_BUFFER,_,E.STREAM_READ),E.bindBuffer(E.PIXEL_PACK_BUFFER,null),E.bindFramebuffer(i.READ_FRAMEBUFFER,this.device.readbackFramebuffer),E.framebufferTexture2D(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,u.gl_texture,0),E.bindBuffer(E.PIXEL_PACK_BUFFER,this.gl_pbo),E.readPixels(t,r,n,a,l,R,s*c),E.bindBuffer(E.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(E.PIXEL_PACK_BUFFER,this.gl_pbo,0,o,s,0)]):[2,this.readTextureSync(e,t,r,n,a,o,s,_)]})})},t.prototype.readTextureSync=function(e,t,r,n,a,o,s,_){void 0===_&&(_=o.byteLength||0);var E=this.device.gl,u=this.device.translateTextureType(e.format);return E.bindFramebuffer(i.FRAMEBUFFER,this.device.readbackFramebuffer),E.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.gl_texture,0),E.pixelStorei(E.PACK_ALIGNMENT,4),E.readPixels(t,r,n,a,E.RGBA,u,o),o},t.prototype.readBuffer=function(e,t,r,n,i){return(0,X.sH)(this,void 0,void 0,function(){var a;return(0,X.YH)(this,function(o){return e3(a=this.device.gl)?[2,this.getBufferSubDataAsync(a.ARRAY_BUFFER,e4(e,t),t,r,n,i)]:[2,Promise.reject()]})})},t.prototype.destroy=function(){e.prototype.destroy.call(this),e3(this.device.gl)&&(null!==this.gl_sync&&this.device.gl.deleteSync(this.gl_sync),null!==this.gl_pbo&&this.device.gl.deleteBuffer(this.gl_pbo))},t}(eJ),tE=function(e){function t(t){var r,n,o=t.id,s=t.device,_=t.descriptor,E=e.call(this,{id:o,device:s})||this;return E.type=a.RenderPipeline,E.drawMode=function(e){switch(e){case T.TRIANGLES:return i.TRIANGLES;case T.POINTS:return i.POINTS;case T.TRIANGLE_STRIP:return i.TRIANGLE_STRIP;case T.LINES:return i.LINES;case T.LINE_STRIP:return i.LINE_STRIP;default:throw Error("Unknown primitive topology mode")}}(null!==(r=_.topology)&&void 0!==r?r:T.TRIANGLES),E.program=_.program,E.inputLayout=_.inputLayout,E.megaState=(0,X.Cl)((0,X.Cl)({},es(eE)),_.megaStateDescriptor),E.colorAttachmentFormats=_.colorAttachmentFormats.slice(),E.depthStencilAttachmentFormat=_.depthStencilAttachmentFormat,E.sampleCount=null!==(n=_.sampleCount)&&void 0!==n?n:1,E}return(0,X.C6)(t,e),t}(eJ),tu=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=e.call(this,{id:r,device:n})||this;return o.type=a.ComputePipeline,o.descriptor=i,o}return(0,X.C6)(t,e),t}(eJ),tl=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(e){this.creationStacks.set(e,Error().stack),this.liveObjects.add(e)},e.prototype.trackResourceDestroyed=function(e){this.deletionStacks.has(e)&&console.warn("Object double freed:",e,"\n\nCreation stack: ",this.creationStacks.get(e),"\n\nDeletion stack: ",this.deletionStacks.get(e),"\n\nThis stack: ",Error().stack),this.deletionStacks.set(e,Error().stack),this.liveObjects.delete(e)},e.prototype.checkForLeaks=function(){var e,t;try{for(var r=(0,X.Ju)(this.liveObjects.values()),n=r.next();!n.done;n=r.next()){var i=n.value;console.warn("Object leaked:",i,"Creation stack:",this.creationStacks.get(i))}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.setResourceLeakCheck=function(e,t){t?this.liveObjects.add(e):this.liveObjects.delete(e)},e}(),tR=function(e){function t(t){var r,n,o=t.id,s=t.device,_=t.descriptor,E=e.call(this,{id:o,device:s})||this;E.type=a.Sampler;var u=E.device.gl;if(e3(u)){var l=E.device.ensureResourceExists(u.createSampler());u.samplerParameteri(l,i.TEXTURE_WRAP_S,e6(_.addressModeU)),u.samplerParameteri(l,i.TEXTURE_WRAP_T,e6(_.addressModeV)),u.samplerParameteri(l,i.TEXTURE_WRAP_R,e6(null!==(r=_.addressModeW)&&void 0!==r?r:_.addressModeU)),u.samplerParameteri(l,i.TEXTURE_MIN_FILTER,e8(_.minFilter,_.mipmapFilter)),u.samplerParameteri(l,i.TEXTURE_MAG_FILTER,e8(_.magFilter,c.NO_MIP)),void 0!==_.lodMinClamp&&u.samplerParameterf(l,i.TEXTURE_MIN_LOD,_.lodMinClamp),void 0!==_.lodMaxClamp&&u.samplerParameterf(l,i.TEXTURE_MAX_LOD,_.lodMaxClamp),void 0!==_.compareFunction&&(u.samplerParameteri(l,u.TEXTURE_COMPARE_MODE,u.COMPARE_REF_TO_TEXTURE),u.samplerParameteri(l,u.TEXTURE_COMPARE_FUNC,_.compareFunction));var T=null!==(n=_.maxAnisotropy)&&void 0!==n?n:1;T>1&&null!==E.device.EXT_texture_filter_anisotropic&&(K(_.minFilter===R.BILINEAR&&_.magFilter===R.BILINEAR&&_.mipmapFilter===c.LINEAR),u.samplerParameterf(l,E.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T)),E.gl_sampler=l}else E.descriptor=_;return E}return(0,X.C6)(t,e),t.prototype.setTextureParameters=function(e,t,r){var n,a=this.device.gl,o=this.descriptor;this.isNPOT(t,r)?a.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR):a.texParameteri(e,i.TEXTURE_MIN_FILTER,e8(o.minFilter,o.mipmapFilter)),a.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e6(o.addressModeU)),a.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e6(o.addressModeV)),a.texParameteri(e,i.TEXTURE_MAG_FILTER,e8(o.magFilter,c.NO_MIP));var s=null!==(n=o.maxAnisotropy)&&void 0!==n?n:1;s>1&&null!==this.device.EXT_texture_filter_anisotropic&&(K(o.minFilter===R.BILINEAR&&o.magFilter===R.BILINEAR&&o.mipmapFilter===c.LINEAR),a.texParameteri(e,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s))},t.prototype.destroy=function(){e.prototype.destroy.call(this),e3(this.device.gl)&&this.device.gl.deleteSampler(e7(this))},t.prototype.isNPOT=function(e,t){return!ee(e)||!ee(t)},t}(eJ),tc=function(){function e(){}return e.prototype.dispatchWorkgroups=function(e,t,r){},e.prototype.dispatchWorkgroupsIndirect=function(e,t){},e.prototype.setPipeline=function(e){},e.prototype.setBindings=function(e){},e.prototype.pushDebugGroup=function(e){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(e){},e}(),tT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.RenderBundle,t.commands=[],t}return(0,X.C6)(t,e),t.prototype.push=function(e){this.commands.push(e)},t.prototype.replay=function(){this.commands.forEach(function(e){return e()})},t}(eJ),tA=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,tf=function(){function e(e,t){void 0===t&&(t={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=es(eE),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=F.LOWER_LEFT,this.clipSpaceNearZ=g.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=e,this.contextAttributes=z(e.getContextAttributes()),e3(e)?(this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=e.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=e.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=e.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=e.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=e.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=e.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=e.getExtension("EXT_color_buffer_half_float"),e.getExtension("EXT_frag_depth"),e.getExtension("OES_element_index_uint"),e.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=e.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=e.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=e.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=e.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=e.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=e.getExtension("KHR_parallel_shader_compile"),e3(e)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new ti({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:h.TEXTURE_2D,mipLevelCount:1,usage:S.RENDER_TARGET,format:!1===this.contextAttributes.alpha?U.U8_RGB_RT:U.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=C.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(h.TEXTURE_2D,C.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(h.TEXTURE_2D,C.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:A.VERTEX,hint:f.STATIC}),e3(e)&&(this.fallbackTexture2DArray=this.createFallbackTexture(h.TEXTURE_2D_ARRAY,C.Float),this.fallbackTexture3D=this.createFallbackTexture(h.TEXTURE_3D,C.Float),this.fallbackTextureCube=this.createFallbackTexture(h.TEXTURE_CUBE_MAP,C.Float)),this.currentMegaState.depthCompare=o.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=N.ALL,e.enable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),this.checkLimits(),t.shaderDebug&&(this.shaderDebug=!0),t.trackResources&&(this.resourceCreationTracker=new tl)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(e,t){var r=e===h.TEXTURE_CUBE_MAP?6:1,n=t===C.Depth?U.D32F:U.U8_RGBA_NORM,i=this.createTexture({dimension:e,format:n,usage:S.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1});return t===C.Float&&i.setImageData([new Uint8Array(4*r)]),e5(i)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var e=this.gl;if(this.maxVertexAttribs=e.getParameter(i.MAX_VERTEX_ATTRIBS),e3(e)){this.uniformBufferMaxPageByteSize=Math.min(e.getParameter(i.MAX_UNIFORM_BLOCK_SIZE),65536),this.uniformBufferWordAlignment=e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var t=e.getInternalformatParameter(e.RENDERBUFFER,e.DEPTH32F_STENCIL8,e.SAMPLES);this.supportedSampleCounts=t?(0,X.fX)([],(0,X.zs)(t),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=65536;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(e,t){return e-t})},e.prototype.configureSwapChain=function(e,t,r){var n=this.scTexture;n.width=e,n.height=t,this.scPlatformFramebuffer=void 0===r?null:r},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(e,t){switch(void 0===t&&(t=!1),e){case U.ALPHA:return i.ALPHA;case U.U8_LUMINANCE:case U.F16_LUMINANCE:case U.F32_LUMINANCE:return i.LUMINANCE;case U.F16_R:return i.R16F;case U.F16_RG:return i.RG16F;case U.F16_RGB:return i.RGB16F;case U.F16_RGBA:return i.RGBA16F;case U.F32_R:return i.R32F;case U.F32_RG:return i.RG32F;case U.F32_RGB:return i.RGB32F;case U.F32_RGBA:return e3(this.gl)?i.RGBA32F:t?this.WEBGL_color_buffer_float.RGBA32F_EXT:i.RGBA;case U.U8_R_NORM:return i.R8;case U.U8_RG_NORM:return i.RG8;case U.U8_RGB_NORM:case U.U8_RGB_RT:return i.RGB8;case U.U8_RGB_SRGB:return i.SRGB8;case U.U8_RGBA_NORM:case U.U8_RGBA_RT:return e3(this.gl)?i.RGBA8:t?i.RGBA4:i.RGBA;case U.U8_RGBA:return i.RGBA;case U.U8_RGBA_SRGB:case U.U8_RGBA_RT_SRGB:return i.SRGB8_ALPHA8;case U.U16_R:return i.R16UI;case U.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case U.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case U.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case U.U16_RGBA_5551:return i.RGB5_A1;case U.U16_RGB_565:return i.RGB565;case U.U32_R:return i.R32UI;case U.S8_RGBA_NORM:return i.RGBA8_SNORM;case U.S8_RG_NORM:return i.RG8_SNORM;case U.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case U.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case U.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case U.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case U.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case U.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case U.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case U.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case U.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case U.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case U.D32F_S8:return e3(this.gl)?i.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?i.DEPTH_STENCIL:i.DEPTH_COMPONENT16;case U.D24_S8:return e3(this.gl)?i.DEPTH24_STENCIL8:this.WEBGL_depth_texture?i.DEPTH_STENCIL:i.DEPTH_COMPONENT16;case U.D32F:return e3(this.gl)?i.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16;case U.D24:return e3(this.gl)?i.DEPTH_COMPONENT24:this.WEBGL_depth_texture?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16;default:throw Error("whoops")}},e.prototype.translateTextureType=function(e){switch(V(e)){case m.U8:return i.UNSIGNED_BYTE;case m.U16:return i.UNSIGNED_SHORT;case m.U32:return i.UNSIGNED_INT;case m.S8:return i.BYTE;case m.F16:return i.HALF_FLOAT;case m.F32:return i.FLOAT;case m.U16_PACKED_5551:return i.UNSIGNED_SHORT_5_5_5_1;case m.D32F:return e3(this.gl)?i.FLOAT:this.WEBGL_depth_texture?i.UNSIGNED_INT:i.UNSIGNED_BYTE;case m.D24:return e3(this.gl)?i.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?i.UNSIGNED_SHORT:i.UNSIGNED_BYTE;case m.D24S8:return e3(this.gl)?i.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?i.UNSIGNED_INT_24_8_WEBGL:i.UNSIGNED_BYTE;case m.D32FS8:return i.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw Error("whoops")}},e.prototype.translateInternalTextureFormat=function(e){switch(e){case U.F32_R:return i.R32F;case U.F32_RG:return i.RG32F;case U.F32_RGB:return i.RGB32F;case U.F32_RGBA:return i.RGBA32F;case U.F16_R:return i.R16F;case U.F16_RG:return i.RG16F;case U.F16_RGB:return i.RGB16F;case U.F16_RGBA:return i.RGBA16F}return this.translateTextureFormat(e)},e.prototype.translateTextureFormat=function(e){if(e0(e)||e===U.F32_LUMINANCE||e===U.U8_LUMINANCE)return this.translateTextureInternalFormat(e);var t=e3(this.gl)||!e3(this.gl)&&!!this.WEBGL_depth_texture;switch(e){case U.D24_S8:case U.D32F_S8:return t?i.DEPTH_STENCIL:i.RGBA;case U.D24:case U.D32F:return t?i.DEPTH_COMPONENT:i.RGBA}var r=e1(e);switch(H(e)){case I.A:return i.ALPHA;case I.R:return r?i.RED_INTEGER:i.RED;case I.RG:return r?i.RG_INTEGER:i.RG;case I.RGB:return r?i.RGB_INTEGER:i.RGB;case I.RGBA:return i.RGBA}},e.prototype.setActiveTexture=function(e){this.currentActiveTexture!==e&&(this.gl.activeTexture(e),this.currentActiveTexture=e)},e.prototype.bindVAO=function(e){this.currentBoundVAO!==e&&(e3(this.gl)?this.gl.bindVertexArray(e):this.OES_vertex_array_object.bindVertexArrayOES(e),this.currentBoundVAO=e)},e.prototype.programCompiled=function(e){K(e.compileState!==P.NeedsCompile),e.compileState===P.Compiling&&(e.compileState=P.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(e))},e.prototype.useProgram=function(e){this.currentProgram!==e&&(this.programCompiled(e),this.gl.useProgram(e.gl_program),this.currentProgram=e)},e.prototype.ensureResourceExists=function(e){if(null!==e)return e;var t=this.gl.getError();throw Error("Created resource is null; GL error encountered: ".concat(t))},e.prototype.createBuffer=function(e){return new tr({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createTexture=function(e){return new ti({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createSampler=function(e){return new tR({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderTarget=function(e){return new ta({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderTargetFromTexture=function(e){var t=e.format,r=e.width,n=e.height;return K(1===e.mipLevelCount),this.createRenderTarget({format:t,width:r,height:n,sampleCount:1,texture:e})},e.prototype.createProgram=function(e){var t,r,n,i=null===(t=e.vertex)||void 0===t?void 0:t.glsl;return(null===(r=e.vertex)||void 0===r?void 0:r.glsl)&&(e.vertex.glsl=ej(this.queryVendorInfo(),"vert",e.vertex.glsl)),(null===(n=e.fragment)||void 0===n?void 0:n.glsl)&&(e.fragment.glsl=ej(this.queryVendorInfo(),"frag",e.fragment.glsl)),this.createProgramSimple(e,i)},e.prototype.createProgramSimple=function(e,t){return new to({id:this.getNextUniqueId(),device:this,descriptor:e},t)},e.prototype.createBindings=function(e){return new e$({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createInputLayout=function(e){return new tn({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderPipeline=function(e){return new tE({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createComputePass=function(){return new tc},e.prototype.createComputePipeline=function(e){return new tu({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createReadback=function(){return new t_({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(e,t){return new ts({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:t}})},e.prototype.formatRenderPassDescriptor=function(e){var t,r,n,i,a,o,s=e.colorAttachment;e.depthClearValue=null!==(t=e.depthClearValue)&&void 0!==t?t:"load",e.stencilClearValue=null!==(r=e.stencilClearValue)&&void 0!==r?r:"load";for(var _=0;_<s.length;_++)e.colorAttachmentLevel||(e.colorAttachmentLevel=[]),e.colorAttachmentLevel[_]=null!==(n=e.colorAttachmentLevel[_])&&void 0!==n?n:0,e.colorResolveToLevel||(e.colorResolveToLevel=[]),e.colorResolveToLevel[_]=null!==(i=e.colorResolveToLevel[_])&&void 0!==i?i:0,e.colorClearColor||(e.colorClearColor=[]),e.colorClearColor[_]=null!==(a=e.colorClearColor[_])&&void 0!==a?a:"load",e.colorStore||(e.colorStore=[]),e.colorStore[_]=null!==(o=e.colorStore[_])&&void 0!==o&&o},e.prototype.createRenderBundle=function(){return new tT({id:this.getNextUniqueId(),device:this})},e.prototype.beginBundle=function(e){this.renderBundle=e},e.prototype.endBundle=function(){this.renderBundle=void 0},e.prototype.executeBundles=function(e){e.forEach(function(e){e.replay()})},e.prototype.createRenderPass=function(e){null!==this.currentRenderPassDescriptor&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=e,this.formatRenderPassDescriptor(e);var t=e.colorAttachment,r=e.colorAttachmentLevel,n=e.colorClearColor,i=e.colorResolveTo,a=e.colorResolveToLevel,o=e.depthStencilAttachment,s=e.depthClearValue,_=e.stencilClearValue,E=e.depthStencilResolveTo,u=i&&1===i.length&&i[0]===this.scTexture;this.setRenderPassParametersBegin(t.length,u);for(var l=0;l<t.length;l++)this.setRenderPassParametersColor(l,t[l],r[l],i[l],a[l],u);this.setRenderPassParametersDepthStencil(o,E,u),this.validateCurrentAttachments();for(var l=0;l<t.length;l++){var R=n[l];"load"!==R&&this.setRenderPassParametersClearColor(l,R.r,R.g,R.b,R.a)}return this.setRenderPassParametersClearDepthStencil(s,_),this},e.prototype.submitPass=function(e){K(null!==this.currentRenderPassDescriptor),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(e,t,r,n,i,a){var o=this.gl;if(K(1===n.mipLevelCount),K(1===e.mipLevelCount),e3(o))e===this.scTexture?o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0,e,0)),o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,n,0),o.blitFramebuffer(i,a,i+n.width,a+n.height,t,r,t+n.width,r+n.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null);else if(e===this.scTexture){var s=this.createRenderTargetFromTexture(n);this.submitBlitRenderPass(s,e)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(e,t,r){switch(e){case U.BC1_SRGB:case U.BC2_SRGB:case U.BC3_SRGB:if(null!==this.WEBGL_compressed_texture_s3tc_srgb)return t%4==0&&r%4==0;return!1;case U.BC1:case U.BC2:case U.BC3:if(null!==this.WEBGL_compressed_texture_s3tc)return t%4==0&&r%4==0;return!1;case U.BC4_UNORM:case U.BC4_SNORM:case U.BC5_UNORM:case U.BC5_SNORM:if(null!==this.EXT_texture_compression_rgtc)return t%4==0&&r%4==0;return!1;case U.U16_R_NORM:case U.U16_RG_NORM:case U.U16_RGBA_NORM:return null!==this.EXT_texture_norm16;case U.F32_R:case U.F32_RG:case U.F32_RGB:case U.F32_RGBA:return null!==this.OES_texture_float_linear;case U.F16_R:case U.F16_RG:case U.F16_RGB:case U.F16_RGBA:return null!==this.OES_texture_half_float_linear;default:return!0}},e.prototype.queryProgramReady=function(e){var t=this.gl;if(e.compileState===P.NeedsCompile)throw Error("whoops");if(e.compileState===P.Compiling){var r=void 0;return(r=null===this.KHR_parallel_shader_compile||t.getProgramParameter(e.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR))&&this.programCompiled(e),r}return e.compileState===P.NeedsBind||e.compileState===P.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(e){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(e){return e},e.prototype.setResourceName=function(e,t){if(e.name=t,e.type===a.Buffer)for(var r=e.gl_buffer_pages,n=0;n<r.length;n++)e9(r[n],"".concat(t," Page ").concat(n));else if(e.type===a.Texture)e9(e5(e),t);else if(e.type===a.Sampler)e9(e7(e),t);else if(e.type===a.RenderTarget){var i=e.gl_renderbuffer;null!==i&&e9(i,t)}else e.type===a.InputLayout&&e9(e.vao,t)},e.prototype.setResourceLeakCheck=function(e,t){null!==this.resourceCreationTracker&&this.resourceCreationTracker.setResourceLeakCheck(e,t)},e.prototype.checkForLeaks=function(){null!==this.resourceCreationTracker&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(e){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(e){},e.prototype.programPatched=function(e,t){K(this.shaderDebug)},e.prototype.getBufferData=function(e,t,r){void 0===r&&(r=0);var n=this.gl;e3(n)&&(n.bindBuffer(n.COPY_READ_BUFFER,e4(e,4*r)),n.getBufferSubData(n.COPY_READ_BUFFER,4*r,t))},e.prototype.debugGroupStatisticsDrawCall=function(e){void 0===e&&(e=1);for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].drawCallCount+=e},e.prototype.debugGroupStatisticsBufferUpload=function(e){void 0===e&&(e=1);for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].bufferUploadCount+=e},e.prototype.debugGroupStatisticsTextureBind=function(e){void 0===e&&(e=1);for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].textureBindCount+=e},e.prototype.debugGroupStatisticsTriangles=function(e){for(var t=this.debugGroupStack.length-1;t>=0;t--)this.debugGroupStack[t].triangleCount+=e},e.prototype.reportShaderError=function(e,t){var r=this.gl,n=r.getShaderParameter(e,r.COMPILE_STATUS);if(!n){console.error((void 0===i&&(i=1),t.split("\n").map(function(e,t){return"".concat(function(e,t,r){for(void 0===r&&(r="0");e.length<4;)e="".concat(r).concat(e);return e}(""+(i+t),0," "),"  ").concat(e)}).join("\n")));var i,a=r.getExtension("WEBGL_debug_shaders");a&&console.error(a.getTranslatedShaderSource(e)),console.error(r.getShaderInfoLog(e))}return n},e.prototype.checkProgramCompilationForErrors=function(e){var t=this.gl,r=e.gl_program;if(!t.getProgramParameter(r,t.LINK_STATUS)){var n=e.descriptor;if(!this.reportShaderError(e.gl_shader_vert,n.vertex.glsl)||!this.reportShaderError(e.gl_shader_frag,n.fragment.glsl))return;console.error(t.getProgramInfoLog(e.gl_program))}},e.prototype.bindFramebufferAttachment=function(e,t,r,n){var o=this.gl;if((0,b.A)(r))o.framebufferRenderbuffer(e,t,o.RENDERBUFFER,null);else if(r.type===a.RenderTarget)null!==r.gl_renderbuffer?o.framebufferRenderbuffer(e,t,o.RENDERBUFFER,r.gl_renderbuffer):null!==r.texture&&o.framebufferTexture2D(e,t,i.TEXTURE_2D,e5(r.texture),n);else if(r.type===a.Texture){var s=e5(r);r.dimension===h.TEXTURE_2D?o.framebufferTexture2D(e,t,i.TEXTURE_2D,s,n):e3(o)&&(r.dimension,h.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(e,t){var r=this.gl,n=(0,b.A)(t)?M.Depth|M.Stencil:255&t.format,i=!!(n&M.Depth),a=!!(n&M.Stencil);i&&a?e3(this.gl)||!e3(this.gl)&&this.WEBGL_depth_texture?this.bindFramebufferAttachment(e,r.DEPTH_STENCIL_ATTACHMENT,t,0):this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,t,0):i?(this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,t,0),this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,null,0)):a&&(this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,t,0),this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var e=-1,t=-1,r=-1,n=0;n<this.currentColorAttachments.length;n++){var i=this.currentColorAttachments[n];null!==i&&(-1===e?(e=i.sampleCount,t=i.width,r=i.height):(K(e===i.sampleCount),K(t===i.width),K(r===i.height)))}this.currentDepthStencilAttachment&&(-1===e?e=this.currentDepthStencilAttachment.sampleCount:(K(e===this.currentDepthStencilAttachment.sampleCount),K(t===this.currentDepthStencilAttachment.width),K(r===this.currentDepthStencilAttachment.height))),this.currentSampleCount=e},e.prototype.setRenderPassParametersBegin=function(e,t){void 0===t&&(t=!1);var r=this.gl;if(t)r.bindFramebuffer(i.FRAMEBUFFER,null);else if(e3(r)?r.bindFramebuffer(i.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(i.FRAMEBUFFER,this.renderPassDrawFramebuffer),e3(r)?r.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1,i.COLOR_ATTACHMENT2,i.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([i.COLOR_ATTACHMENT0_WEBGL,i.COLOR_ATTACHMENT1_WEBGL,i.COLOR_ATTACHMENT2_WEBGL,i.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var n=e;n<this.currentColorAttachments.length;n++){var a=e3(r)?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,o=e3(r)?i.COLOR_ATTACHMENT0:i.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(a,o+n,i.RENDERBUFFER,null),r.framebufferTexture2D(a,o+n,i.TEXTURE_2D,null,0)}this.currentColorAttachments.length=e},e.prototype.setRenderPassParametersColor=function(e,t,r,n,a,o){void 0===o&&(o=!1);var s=e3(this.gl);(this.currentColorAttachments[e]!==t||this.currentColorAttachmentLevels[e]!==r)&&(this.currentColorAttachments[e]=t,this.currentColorAttachmentLevels[e]=r,!o&&(s||!s&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(s?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,(s?i.COLOR_ATTACHMENT0:i.COLOR_ATTACHMENT0_WEBGL)+e,t,r),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[e]!==n||this.currentColorResolveToLevels[e]!==a)&&(this.currentColorResolveTos[e]=n,this.currentColorResolveToLevels[e]=a,null!==n&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(e,t,r){void 0===r&&(r=!1);var n=this.gl;this.currentDepthStencilAttachment!==e&&(this.currentDepthStencilAttachment=e,r||this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(e3(n)?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==t&&(this.currentDepthStencilResolveTo=t,t&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(e,t,r,n,i){var a=this.gl;if(null!==this.OES_draw_buffers_indexed){var o=this.currentMegaState.attachmentsState[e];o&&o.channelWriteMask!==N.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(e,!0,!0,!0,!0),o.channelWriteMask=N.ALL)}else{var o=this.currentMegaState.attachmentsState[0];o&&o.channelWriteMask!==N.ALL&&(a.colorMask(!0,!0,!0,!0),o.channelWriteMask=N.ALL)}this.setScissorRectEnabled(!1),e3(a)?a.clearBufferfv(a.COLOR,e,[t,r,n,i]):(a.clearColor(t,r,n,i),a.clear(a.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(e,t){void 0===e&&(e="load"),void 0===t&&(t="load");var r=this.gl;"load"!==e&&(K(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(r.depthMask(!0),this.currentMegaState.depthWrite=!0),e3(r)?r.clearBufferfv(r.DEPTH,0,[e]):(r.clearDepth(e),r.clear(r.DEPTH_BUFFER_BIT))),"load"!==t&&(K(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(r.enable(r.STENCIL_TEST),r.stencilMask(255),this.currentMegaState.stencilWrite=!0),e3(r)?r.clearBufferiv(r.STENCIL,0,[t]):(r.clearStencil(t),r.clear(r.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(e){var t,r=this;if(this.renderBundle){this.renderBundle.push(function(){return r.setBindings(e)});return}var n=this.gl,a=e.uniformBufferBindings,o=e.samplerBindings,s=e.bindingLayouts;K(0<s.bindingLayoutTables.length);var _=s.bindingLayoutTables[0];K(a.length>=_.numUniformBuffers),K(o.length>=_.numSamplers);for(var E=0;E<a.length;E++){var u=a[E];if(0!==u.size){var l=_.firstUniformBuffer+E,R=u.buffer,c=u.offset||0,T=u.size||R.byteSize;if(R!==this.currentUniformBuffers[l]||c!==this.currentUniformBufferByteOffsets[l]||T!==this.currentUniformBufferByteSizes[l]){var A=c%R.pageByteSize,f=R.gl_buffer_pages[c/R.pageByteSize|0];K(A+T<=R.pageByteSize),e3(n)&&n.bindBufferRange(n.UNIFORM_BUFFER,l,f,A,T),this.currentUniformBuffers[l]=R,this.currentUniformBufferByteOffsets[l]=c,this.currentUniformBufferByteSizes[l]=T}}}for(var E=0;E<_.numSamplers;E++){var u=o[E],d=_.firstSampler+E,p=null!==u&&null!==u.sampler?e7(u.sampler):null,S=null!==u&&null!==u.texture?e5(u.texture):null;if(this.currentSamplers[d]!==p&&(e3(n)&&n.bindSampler(d,p),this.currentSamplers[d]=p),this.currentTextures[d]!==S){if(this.setActiveTexture(n.TEXTURE0+d),null!==S){var N=z(u).texture,B=N.gl_target,C=N.width,F=N.height;u.texture.textureIndex=d,n.bindTexture(B,S),e3(n)||null===(t=u.sampler)||void 0===t||t.setTextureParameters(B,C,F),this.debugGroupStatisticsTextureBind()}else{var g=(0,X.Cl)((0,X.Cl)({},u),eu),O=g.dimension,m=g.formatKind,B=function(e){if(e===h.TEXTURE_2D)return i.TEXTURE_2D;if(e===h.TEXTURE_2D_ARRAY)return i.TEXTURE_2D_ARRAY;if(e===h.TEXTURE_CUBE_MAP)return i.TEXTURE_CUBE_MAP;if(e===h.TEXTURE_3D)return i.TEXTURE_3D;throw Error("whoops")}(O);n.bindTexture(B,this.getFallbackTexture((0,X.Cl)({gl_target:B,formatKind:m},g)))}this.currentTextures[d]=S}}},e.prototype.setViewport=function(e,t,r,n){this.gl.viewport(e,t,r,n)},e.prototype.setScissorRect=function(e,t,r,n){var i=this.gl;this.setScissorRectEnabled(!0),i.scissor(e,t,r,n)},e.prototype.applyAttachmentStateIndexed=function(e,t,r){var n=this.gl,i=this.OES_draw_buffers_indexed;t.channelWriteMask!==r.channelWriteMask&&(i.colorMaskiOES(e,!!(r.channelWriteMask&N.RED),!!(r.channelWriteMask&N.GREEN),!!(r.channelWriteMask&N.BLUE),!!(r.channelWriteMask&N.ALPHA)),t.channelWriteMask=r.channelWriteMask);var a=t.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||t.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,o=t.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||t.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||t.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||t.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(o||a)&&(tt(t.rgbBlendState)&&tt(t.alphaBlendState)?i.enableiOES(e,n.BLEND):tt(r.rgbBlendState)&&tt(r.alphaBlendState)&&i.disableiOES(e,n.BLEND)),a&&(i.blendEquationSeparateiOES(e,r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),t.rgbBlendState.blendMode=r.rgbBlendState.blendMode,t.alphaBlendState.blendMode=r.alphaBlendState.blendMode),o&&(i.blendFuncSeparateiOES(e,r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),t.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,t.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,t.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(e,t){var r=this.gl;e.channelWriteMask!==t.channelWriteMask&&(r.colorMask(!!(t.channelWriteMask&N.RED),!!(t.channelWriteMask&N.GREEN),!!(t.channelWriteMask&N.BLUE),!!(t.channelWriteMask&N.ALPHA)),e.channelWriteMask=t.channelWriteMask);var n=e.rgbBlendState.blendMode!==t.rgbBlendState.blendMode||e.alphaBlendState.blendMode!==t.alphaBlendState.blendMode,i=e.rgbBlendState.blendSrcFactor!==t.rgbBlendState.blendSrcFactor||e.alphaBlendState.blendSrcFactor!==t.alphaBlendState.blendSrcFactor||e.rgbBlendState.blendDstFactor!==t.rgbBlendState.blendDstFactor||e.alphaBlendState.blendDstFactor!==t.alphaBlendState.blendDstFactor;(i||n)&&(tt(e.rgbBlendState)&&tt(e.alphaBlendState)?r.enable(r.BLEND):tt(t.rgbBlendState)&&tt(t.alphaBlendState)&&r.disable(r.BLEND)),n&&(r.blendEquationSeparate(t.rgbBlendState.blendMode,t.alphaBlendState.blendMode),e.rgbBlendState.blendMode=t.rgbBlendState.blendMode,e.alphaBlendState.blendMode=t.alphaBlendState.blendMode),i&&(r.blendFuncSeparate(t.rgbBlendState.blendSrcFactor,t.rgbBlendState.blendDstFactor,t.alphaBlendState.blendSrcFactor,t.alphaBlendState.blendDstFactor),e.rgbBlendState.blendSrcFactor=t.rgbBlendState.blendSrcFactor,e.alphaBlendState.blendSrcFactor=t.alphaBlendState.blendSrcFactor,e.rgbBlendState.blendDstFactor=t.rgbBlendState.blendDstFactor,e.alphaBlendState.blendDstFactor=t.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(e){var t=this.gl,r=this.currentMegaState;if(null!==this.OES_draw_buffers_indexed)for(var n=0;n<e.attachmentsState.length;n++)this.applyAttachmentStateIndexed(n,r.attachmentsState[0],e.attachmentsState[0]);else K(1===e.attachmentsState.length),this.applyAttachmentState(r.attachmentsState[0],e.attachmentsState[0]);q(r.blendConstant,e.blendConstant)||(t.blendColor(e.blendConstant.r,e.blendConstant.g,e.blendConstant.b,e.blendConstant.a),Z(r.blendConstant,e.blendConstant)),r.depthCompare!==e.depthCompare&&(t.depthFunc(e.depthCompare),r.depthCompare=e.depthCompare),!!r.depthWrite!=!!e.depthWrite&&(t.depthMask(e.depthWrite),r.depthWrite=e.depthWrite),!!r.stencilWrite!=!!e.stencilWrite&&(t.stencilMask(e.stencilWrite?255:0),r.stencilWrite=e.stencilWrite);var i=!1;if(!eh(r.stencilFront,e.stencilFront)){i=!0;var a=e.stencilFront,o=a.passOp,s=a.failOp,E=a.depthFailOp,u=a.compare;(r.stencilFront.passOp!==o||r.stencilFront.failOp!==s||r.stencilFront.depthFailOp!==E)&&(t.stencilOpSeparate(t.FRONT,s,E,o),r.stencilFront.passOp=o,r.stencilFront.failOp=s,r.stencilFront.depthFailOp=E),r.stencilFront.compare!==u&&(this.setStencilReference(0),r.stencilFront.compare=u)}if(!eh(r.stencilBack,e.stencilBack)){i=!0;var l=e.stencilBack,o=l.passOp,s=l.failOp,E=l.depthFailOp,u=l.compare;(r.stencilBack.passOp!==o||r.stencilBack.failOp!==s||r.stencilBack.depthFailOp!==E)&&(t.stencilOpSeparate(t.BACK,s,E,o),r.stencilBack.passOp=o,r.stencilBack.failOp=s,r.stencilBack.depthFailOp=E),r.stencilBack.compare!==u&&(this.setStencilReference(0),r.stencilBack.compare=u)}(r.stencilFront.mask!==e.stencilFront.mask||r.stencilBack.mask!==e.stencilBack.mask)&&(i=!0,r.stencilFront.mask=e.stencilFront.mask,r.stencilBack.mask=e.stencilBack.mask),i&&this.applyStencil(),r.cullMode!==e.cullMode&&(r.cullMode===_.NONE?t.enable(t.CULL_FACE):e.cullMode===_.NONE&&t.disable(t.CULL_FACE),e.cullMode===_.BACK?t.cullFace(t.BACK):e.cullMode===_.FRONT?t.cullFace(t.FRONT):e.cullMode===_.FRONT_AND_BACK&&t.cullFace(t.FRONT_AND_BACK),r.cullMode=e.cullMode),r.frontFace!==e.frontFace&&(t.frontFace(e.frontFace),r.frontFace=e.frontFace),r.polygonOffset!==e.polygonOffset&&(e.polygonOffset?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),r.polygonOffset=e.polygonOffset),(r.polygonOffsetFactor!==e.polygonOffsetFactor||r.polygonOffsetUnits!==e.polygonOffsetUnits)&&(t.polygonOffset(e.polygonOffsetFactor,e.polygonOffsetUnits),r.polygonOffsetFactor=e.polygonOffsetFactor,r.polygonOffsetUnits=e.polygonOffsetUnits)},e.prototype.validatePipelineFormats=function(e){for(var t=0;t<this.currentColorAttachments.length;t++)if(null===this.currentColorAttachments[t])continue;this.currentDepthStencilAttachment&&K(this.currentDepthStencilAttachment.format===e.depthStencilAttachmentFormat),-1!==this.currentSampleCount&&K(this.currentSampleCount===e.sampleCount)},e.prototype.setPipeline=function(e){var t=this;if(this.renderBundle){this.renderBundle.push(function(){return t.setPipeline(e)});return}this.currentPipeline=e,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===P.NeedsBind){var n=this.gl,i=r.gl_program,a=r.descriptor,o=te(a.vertex.glsl,tA);if(e3(n))for(var s=0;s<o.length;s++){var _=(0,X.zs)(o[s],2)[1],E=n.getUniformBlockIndex(i,_);-1!==E&&0xffffffff!==E&&n.uniformBlockBinding(i,E,s)}for(var u=te(a.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),s=0;s<u.length;s++){var l=(0,X.zs)(u[s],3),R=l[1],c=l[2],T=n.getUniformLocation(i,R);n.uniform1i(T,parseInt(c))}r.compileState=P.ReadyToUse}},e.prototype.setVertexInput=function(e,t,r){var n,i,a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.setVertexInput(e,t,r)});return}if(null!==e){K(this.currentPipeline.inputLayout===e),this.bindVAO(e.vao);for(var s=this.gl,_=0;_<e.vertexBufferDescriptors.length;_++){var E=e.vertexBufferDescriptors[_],u=E.arrayStride,l=E.attributes;try{for(var R=(n=void 0,(0,X.Ju)(l)),c=R.next();!c.done;c=R.next()){var T=c.value,f=T.shaderLocation,d=T.offset,p=e3(s)?f:null===(a=e.program.attributes[f])||void 0===a?void 0:a.location;if(!(0,b.A)(p)){var h=t[_];if(null===h)continue;var S=T.vertexFormat;s.bindBuffer(s.ARRAY_BUFFER,e4(h.buffer));var N=(h.offset||0)+d;s.vertexAttribPointer(p,S.size,S.type,S.normalized,u,N)}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}}if(K(null!==r==(null!==e.indexBufferFormat)),null!==r){var B=r.buffer;K(B.usage===A.INDEX),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e4(B)),this.currentIndexBufferByteOffset=r.offset||0}else this.currentIndexBufferByteOffset=null}else K(null===this.currentPipeline.inputLayout),K(null===r),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(e){this.currentStencilRef!==e&&(this.currentStencilRef=e,this.applyStencil())},e.prototype.draw=function(e,t,r,n){var i,a=this;if(this.renderBundle){this.renderBundle.push(function(){return a.draw(e,t,r,n)});return}var o=this.gl,s=this.currentPipeline;if(t){var _=[s.drawMode,r||0,e,t];e3(o)?o.drawArraysInstanced.apply(o,(0,X.fX)([],(0,X.zs)(_),!1)):(i=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(i,(0,X.fX)([],(0,X.zs)(_),!1))}else o.drawArrays(s.drawMode,r,e);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(t,1))},e.prototype.drawIndexed=function(e,t,r,n,i){var a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.drawIndexed(e,t,r,n,i)});return}var s=this.gl,_=this.currentPipeline,E=z(_.inputLayout),u=z(this.currentIndexBufferByteOffset)+r*E.indexBufferCompByteSize;if(t){var l=[_.drawMode,e,E.indexBufferType,u,t];e3(s)?s.drawElementsInstanced.apply(s,(0,X.fX)([],(0,X.zs)(l),!1)):(a=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(a,(0,X.fX)([],(0,X.zs)(l),!1))}else s.drawElements(_.drawMode,e,E.indexBufferType,u);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(t,1))},e.prototype.drawIndirect=function(e,t){},e.prototype.drawIndexedIndirect=function(e,t){},e.prototype.beginOcclusionQuery=function(e){var t=this.gl;if(e3(t)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;t.beginQuery(r.gl_query_type,r.gl_query[e])}},e.prototype.endOcclusionQuery=function(){var e=this.gl;if(e3(e)){var t=this.currentRenderPassDescriptor.occlusionQueryPool;e.endQuery(t.gl_query_type)}},e.prototype.pipelineQueryReady=function(e){return this.queryProgramReady(e.program)},e.prototype.pipelineForceReady=function(e){},e.prototype.endPass=function(){for(var e=this.gl,t=e3(e),r=1===this.currentColorResolveTos.length&&this.currentColorResolveTos[0]===this.scTexture,n=!1,a=0;a<this.currentColorAttachments.length;a++){var o=this.currentColorAttachments[a];if(null!==o){var s=this.currentColorResolveTos[a],_=!1;null!==s&&(K(o.width===s.width&&o.height===s.height),this.setScissorRectEnabled(!1),!r&&(t&&e.bindFramebuffer(e.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&t&&this.bindFramebufferAttachment(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),_=!0,!r&&(s===this.scTexture?e.bindFramebuffer(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,this.scPlatformFramebuffer):(e.bindFramebuffer(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&e.framebufferTexture2D(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s.gl_texture,this.currentColorResolveToLevels[a]))),r||(t?(e.blitFramebuffer(0,0,o.width,o.height,0,0,s.width,s.height,e.COLOR_BUFFER_BIT,e.LINEAR),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(o,s)),n=!0),this.currentRenderPassDescriptor.colorStore[a]||r||_||(e.bindFramebuffer(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,e.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),r||e.bindFramebuffer(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var E=this.currentDepthStencilAttachment;if(E){var u=this.currentDepthStencilResolveTo,_=!1;u&&(K(E.width===u.width&&E.height===u.height),this.setScissorRectEnabled(!1),!r&&(e.bindFramebuffer(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),e.bindFramebuffer(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,E),this.bindFramebufferDepthStencilAttachment(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,u))),_=!0,r||(t&&e.blitFramebuffer(0,0,E.width,E.height,0,0,u.width,u.height,e.DEPTH_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,null)),n=!0),r||this.currentRenderPassDescriptor.depthStencilStore||(_||(e.bindFramebuffer(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,E),_=!0),t&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[e.DEPTH_STENCIL_ATTACHMENT])),!r&&_&&e.bindFramebuffer(t?i.READ_FRAMEBUFFER:i.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}r||n||e.bindFramebuffer(t?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(e){if(this.currentScissorEnabled!==e){var t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.currentScissorEnabled=e}},e.prototype.applyStencil=function(){(0,b.A)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(i.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(i.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},e.prototype.getFallbackTexture=function(e){var t=e.gl_target,r=e.formatKind;if(t===i.TEXTURE_2D)return r===C.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(t===i.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(t===i.TEXTURE_3D)return this.fallbackTexture3D;if(t===i.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw Error("whoops")},e.prototype.submitBlitRenderPass=function(e,t){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:"layout(location = 0) in vec2 a_Position;\nout vec2 v_TexCoord;\nvoid main() {\n  v_TexCoord = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n\n  #ifdef VIEWPORT_ORIGIN_TL\n    v_TexCoord.y = 1.0 - v_TexCoord.y;\n  #endif\n}"},fragment:{glsl:"uniform sampler2D u_Texture;\nin vec2 v_TexCoord;\nout vec4 outputColor;\nvoid main() {\n  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);\n}"}}),this.blitVertexBuffer=this.createBuffer({usage:A.VERTEX|A.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:8,stepMode:d.VERTEX,attributes:[{format:U.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:T.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[U.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:es(eE)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:e.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:e}));var r=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var n=this.createRenderPass({colorAttachment:[e],colorResolveTo:[t],colorClearColor:[$]}),i=this.getCanvas(),a=i.width,o=i.height;n.setPipeline(this.blitRenderPipeline),n.setBindings(this.blitBindings),n.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),n.setViewport(0,0,a,o),this.gl.disable(this.gl.BLEND),n.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=r,this.inBlitRenderPass=!1},e}(),td=function(){function e(e){this.pluginOptions=e}return e.prototype.createSwapChain=function(e){return(0,X.sH)(this,void 0,void 0,function(){var t,r,n,i,a,o,s,_,E,u,l,R,c;return(0,X.YH)(this,function(T){return r=(t=this.pluginOptions).targets,n=t.xrCompatible,a=void 0!==(i=t.antialias)&&i,s=void 0!==(o=t.preserveDrawingBuffer)&&o,E=void 0===(_=t.premultipliedAlpha)||_,u=t.shaderDebug,l=t.trackResources,R={antialias:a,preserveDrawingBuffer:s,stencil:!0,premultipliedAlpha:E,xrCompatible:n},this.handleContextEvents(e),r.includes("webgl2")&&(c=e.getContext("webgl2",R)||e.getContext("experimental-webgl2",R)),!c&&r.includes("webgl1")&&(c=e.getContext("webgl",R)||e.getContext("experimental-webgl",R)),[2,new tf(c,{shaderDebug:u,trackResources:l})]})})},e.prototype.handleContextEvents=function(e){var t=this.pluginOptions,r=t.onContextLost,n=t.onContextRestored,i=t.onContextCreationError;i&&e.addEventListener("webglcontextcreationerror",i,!1),r&&e.addEventListener("webglcontextlost",r,!1),n&&e.addEventListener("webglcontextrestored",n,!1)},e}();let tp="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&tp.decode();let th=null;function tS(){return(null===th||0===th.byteLength)&&(th=new Uint8Array(n.memory.buffer)),th}function tN(e,t){return e>>>=0,tp.decode(tS().subarray(e,e+t))}let tB=Array(128).fill(void 0);tB.push(void 0,null,!0,!1);let tC=tB.length,tF=0,tg="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},tO="function"==typeof tg.encodeInto?function(e,t){return tg.encodeInto(e,t)}:function(e,t){let r=tg.encode(e);return t.set(r),{read:e.length,written:r.length}};function tm(e,t,r){if(void 0===r){let r=tg.encode(e),n=t(r.length,1)>>>0;return tS().subarray(n,n+r.length).set(r),tF=r.length,n}let n=e.length,i=t(n,1)>>>0,a=tS(),o=0;for(;o<n;o++){let t=e.charCodeAt(o);if(t>127)break;a[i+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),i=r(i,n,n=o+3*e.length,1)>>>0;let t=tO(e,tS().subarray(i+o,i+n));o+=t.written}return tF=o,i}let tI=null;function tM(){return(null===tI||0===tI.byteLength)&&(tI=new Int32Array(n.memory.buffer)),tI}function tU(e,t,r){let i,a;try{let _=n.__wbindgen_add_to_stack_pointer(-16),E=tm(e,n.__wbindgen_malloc,n.__wbindgen_realloc),u=tF,l=tm(t,n.__wbindgen_malloc,n.__wbindgen_realloc),R=tF;n.glsl_compile(_,E,u,l,R,r);var o=tM()[_/4+0],s=tM()[_/4+1];return i=o,a=s,tN(o,s)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(i,a,1)}}class tL{static __wrap(e){e>>>=0;let t=Object.create(tL.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();n.__wbg_wgslcomposer_free(e)}constructor(){let e=n.wgslcomposer_new();return tL.__wrap(e)}load_composable(e){let t=tm(e,n.__wbindgen_malloc,n.__wbindgen_realloc),r=tF;n.wgslcomposer_load_composable(this.__wbg_ptr,t,r)}wgsl_compile(e){let t,r;try{let o=n.__wbindgen_add_to_stack_pointer(-16),s=tm(e,n.__wbindgen_malloc,n.__wbindgen_realloc),_=tF;n.wgslcomposer_wgsl_compile(o,this.__wbg_ptr,s,_);var i=tM()[o/4+0],a=tM()[o/4+1];return t=i,r=a,tN(i,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,r,1)}}}async function tD(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{let r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}async function tP(e){if(void 0!==n)return n;let t=function(){let e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(e,t){return function(e){tC===tB.length&&tB.push(tB.length+1);let t=tC;return tC=tB[t],tB[t]=e,t}(tN(e,t))},e.wbg.__wbindgen_object_drop_ref=function(e){var t;tB[t=e],t<132||(tB[t]=tC,tC=t)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(tB[e])},e.wbg.__wbg_log_576ca876af0d4a77=function(e,t){console.log(tB[e],tB[t])},e.wbg.__wbindgen_throw=function(e,t){throw Error(tN(e,t))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:r,module:i}=await tD(await e,t);return n=r.exports,tP.__wbindgen_wasm_module=i,tI=null,th=null,n}function tv(e){if(e===U.U8_R_NORM)return"r8unorm";if(e===U.S8_R_NORM)return"r8snorm";if(e===U.U8_RG_NORM)return"rg8unorm";if(e===U.S8_RG_NORM)return"rg8snorm";if(e===U.U32_R)return"r32uint";if(e===U.S32_R)return"r32sint";if(e===U.F32_R)return"r32float";else if(e===U.U16_RG)return"rg16uint";else if(e===U.S16_RG)return"rg16sint";else if(e===U.F16_RG)return"rg16float";else if(e===U.U8_RGBA_RT)return"bgra8unorm";else if(e===U.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";else if(e===U.U8_RGBA_NORM)return"rgba8unorm";else if(e===U.U8_RGBA_SRGB)return"rgba8unorm-srgb";else if(e===U.S8_RGBA_NORM)return"rgba8snorm";else if(e===U.U32_RG)return"rg32uint";else if(e===U.S32_RG)return"rg32sint";else if(e===U.F32_RG)return"rg32float";else if(e===U.U16_RGBA)return"rgba16uint";else if(e===U.S16_RGBA)return"rgba16sint";else if(e===U.F16_RGBA)return"rgba16float";else if(e===U.F32_RGBA)return"rgba32float";else if(e===U.U32_RGBA)return"rgba32uint";else if(e===U.S32_RGBA)return"rgba32sint";else if(e===U.D24)return"depth24plus";else if(e===U.D24_S8)return"depth24plus-stencil8";else if(e===U.D32F)return"depth32float";else if(e===U.D32F_S8)return"depth32float-stencil8";else if(e===U.BC1)return"bc1-rgba-unorm";else if(e===U.BC1_SRGB)return"bc1-rgba-unorm-srgb";else if(e===U.BC2)return"bc2-rgba-unorm";else if(e===U.BC2_SRGB)return"bc2-rgba-unorm-srgb";else if(e===U.BC3)return"bc3-rgba-unorm";else if(e===U.BC3_SRGB)return"bc3-rgba-unorm-srgb";else if(e===U.BC4_SNORM)return"bc4-r-snorm";else if(e===U.BC4_UNORM)return"bc4-r-unorm";else if(e===U.BC5_SNORM)return"bc5-rg-snorm";else if(e===U.BC5_UNORM)return"bc5-rg-unorm";else throw"whoops"}function tG(e){if(e===l.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===l.REPEAT)return"repeat";if(e===l.MIRRORED_REPEAT)return"mirror-repeat";throw Error("whoops")}function tb(e){if(e===R.BILINEAR)return"linear";if(e===R.POINT)return"nearest";throw Error("whoops")}function ty(e){return e.gpuBuffer}function tx(e){if(e===E.ZERO)return"zero";if(e===E.ONE)return"one";if(e===E.SRC)return"src";if(e===E.ONE_MINUS_SRC)return"one-minus-src";if(e===E.DST)return"dst";if(e===E.ONE_MINUS_DST)return"one-minus-dst";if(e===E.SRC_ALPHA)return"src-alpha";else if(e===E.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";else if(e===E.DST_ALPHA)return"dst-alpha";else if(e===E.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";else if(e===E.CONST)return"constant";else if(e===E.ONE_MINUS_CONSTANT)return"one-minus-constant";else if(e===E.SRC_ALPHA_SATURATE)return"src-alpha-saturated";else throw Error("whoops")}function tX(e){return{operation:function(e){if(e===u.ADD)return"add";if(e===u.SUBSTRACT)return"subtract";if(e===u.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===u.MIN)return"min";if(e===u.MAX)return"max";throw Error("whoops")}(e.blendMode),srcFactor:tx(e.blendSrcFactor),dstFactor:tx(e.blendDstFactor)}}function tw(e){return e.blendMode===u.ADD&&e.blendSrcFactor===E.ONE&&e.blendDstFactor===E.ZERO}function tW(e){if(e===o.NEVER)return"never";if(e===o.LESS)return"less";if(e===o.EQUAL)return"equal";if(e===o.LEQUAL)return"less-equal";if(e===o.GREATER)return"greater";if(e===o.NOTEQUAL)return"not-equal";if(e===o.GEQUAL)return"greater-equal";else if(e===o.ALWAYS)return"always";else throw Error("whoops")}function tH(e){if(e===B.KEEP)return"keep";if(e===B.REPLACE)return"replace";if(e===B.ZERO)return"zero";if(e===B.DECREMENT_CLAMP)return"decrement-clamp";if(e===B.DECREMENT_WRAP)return"decrement-wrap";if(e===B.INCREMENT_CLAMP)return"increment-clamp";if(e===B.INCREMENT_WRAP)return"increment-wrap";else if(e===B.INVERT)return"invert";else throw Error("whoops")}function tV(e,t,r,n){switch(void 0===r&&(r=!1),e){case U.S8_R:case U.S8_R_NORM:case U.S8_RG_NORM:case U.S8_RGB_NORM:case U.S8_RGBA_NORM:var i=new Int8Array(t);return n&&i.set(new Int8Array(n)),i;case U.U8_R:case U.U8_R_NORM:case U.U8_RG:case U.U8_RG_NORM:case U.U8_RGB:case U.U8_RGB_NORM:case U.U8_RGB_SRGB:case U.U8_RGBA:case U.U8_RGBA_NORM:case U.U8_RGBA_SRGB:var a=new Uint8Array(t);return n&&a.set(new Uint8Array(n)),a;case U.S16_R:case U.S16_RG:case U.S16_RG_NORM:case U.S16_RGB_NORM:case U.S16_RGBA:case U.S16_RGBA_NORM:var o=new Int16Array(t instanceof ArrayBuffer?t:r?t/2:t);return n&&o.set(new Int16Array(n)),o;case U.U16_R:case U.U16_RGB:case U.U16_RGBA_5551:case U.U16_RGBA_NORM:case U.U16_RG_NORM:case U.U16_R_NORM:var s=new Uint16Array(t instanceof ArrayBuffer?t:r?t/2:t);return n&&s.set(new Uint16Array(n)),s;case U.S32_R:var _=new Int32Array(t instanceof ArrayBuffer?t:r?t/4:t);return n&&_.set(new Int32Array(n)),_;case U.U32_R:case U.U32_RG:var E=new Uint32Array(t instanceof ArrayBuffer?t:r?t/4:t);return n&&E.set(new Uint32Array(n)),E;case U.F32_R:case U.F32_RG:case U.F32_RGB:case U.F32_RGBA:var u=new Float32Array(t instanceof ArrayBuffer?t:r?t/4:t);return n&&u.set(new Float32Array(n)),u}var l=new Uint8Array(t);return n&&l.set(new Uint8Array(n)),l}function tk(e){switch(e){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":case"depth16unorm":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":case"depth32float":default:return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw Error("No fixed size for Stencil8 format!");case"depth24plus":throw Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8}}}!function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(v||(v={})),function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"}(G||(G={}));var tY=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this)||this;return i.id=r,i.device=n,i}return(0,X.C6)(t,e),t.prototype.destroy=function(){},t}(w.A),tK=function(e){function t(t){var r,n,i=t.id,o=t.device,s=t.descriptor,_=e.call(this,{id:i,device:o})||this;_.type=a.Bindings;var E=s.pipeline;K(!!E);var u=s.uniformBufferBindings,l=s.storageBufferBindings,R=s.samplerBindings,c=s.storageTextureBindings;_.numUniformBuffers=(null==u?void 0:u.length)||0;var T=[[],[],[],[]],A=0;if(u&&u.length)for(var f=0;f<u.length;f++){var d=s.uniformBufferBindings[f],p=d.binding,h=d.size,S=d.offset,N=d.buffer,B={buffer:ty(N),offset:null!=S?S:0,size:h};T[0].push({binding:null!=p?p:A++,resource:B})}if(R&&R.length){A=0;for(var f=0;f<R.length;f++){var C=(0,X.Cl)((0,X.Cl)({},R[f]),eu),p=s.samplerBindings[f],F=null!==p.texture?p.texture:_.device.getFallbackTexture(C);C.dimension=F.dimension,C.formatKind=Y(F.format);var g=F.gpuTextureView;if(T[1].push({binding:null!==(r=p.textureBinding)&&void 0!==r?r:A++,resource:g}),-1!==p.samplerBinding){var O=(null!==p.sampler?p.sampler:_.device.getFallbackSampler(C)).gpuSampler;T[1].push({binding:null!==(n=p.samplerBinding)&&void 0!==n?n:A++,resource:O})}}}if(l&&l.length){A=0;for(var f=0;f<l.length;f++){var m=s.storageBufferBindings[f],p=m.binding,h=m.size,S=m.offset,N=m.buffer,B={buffer:ty(N),offset:null!=S?S:0,size:h};T[2].push({binding:null!=p?p:A++,resource:B})}}if(c&&c.length){A=0;for(var f=0;f<c.length;f++){var I=s.storageTextureBindings[f],p=I.binding,F=I.texture,g=F.gpuTextureView;T[3].push({binding:null!=p?p:A++,resource:g})}}var M=T.findLastIndex(function(e){return!!e.length});return _.gpuBindGroup=T.map(function(e,t){return t<=M&&_.device.device.createBindGroup({layout:E.getBindGroupLayout(t),entries:e})}),_}return(0,X.C6)(t,e),t}(tY),tz=function(e){function t(t){var r,n=t.id,i=t.device,o=t.descriptor,s=e.call(this,{id:n,device:i})||this;s.type=a.Buffer;var _=o.usage,E=o.viewOrSize,u=!!(_&A.MAP_READ);s.usage=(r=0,_&A.INDEX&&(r|=GPUBufferUsage.INDEX),_&A.VERTEX&&(r|=GPUBufferUsage.VERTEX),_&A.UNIFORM&&(r|=GPUBufferUsage.UNIFORM),_&A.STORAGE&&(r|=GPUBufferUsage.STORAGE),_&A.COPY_SRC&&(r|=GPUBufferUsage.COPY_SRC),_&A.INDIRECT&&(r|=GPUBufferUsage.INDIRECT),r|=GPUBufferUsage.COPY_DST),u&&(s.usage=A.MAP_READ|A.COPY_DST);var l=!(0,y.A)(E);return s.view=(0,y.A)(E)?null:E,s.size=(0,y.A)(E)?er(E,4):er(E.byteLength,4),(0,y.A)(E)?s.gpuBuffer=s.device.device.createBuffer({usage:s.usage,size:s.size,mappedAtCreation:!!u&&l}):(s.gpuBuffer=s.device.device.createBuffer({usage:s.usage,size:s.size,mappedAtCreation:!0}),new(E&&E.constructor||Float32Array)(s.gpuBuffer.getMappedRange()).set(E),s.gpuBuffer.unmap()),s}return(0,X.C6)(t,e),t.prototype.setSubData=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=this.gpuBuffer;n=Math.min(n=n||t.byteLength,this.size-e);var a=t.byteOffset+r,o=a+n,s=n+3&-4;if(s!==n){var _=new Uint8Array(t.buffer.slice(a,o));(t=new Uint8Array(s)).set(_),r=0,a=0,o=s,n=s}for(var E=0;o-(a+E)>0xf00000;)this.device.device.queue.writeBuffer(i,e+E,t.buffer,a+E,0xf00000),E+=0xf00000;this.device.device.queue.writeBuffer(i,e+E,t.buffer,a+E,n-E)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},t}(tY),tq=function(){function e(){this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(e,t,r){this.gpuComputePassEncoder.dispatchWorkgroups(e,t,r)},e.prototype.dispatchWorkgroupsIndirect=function(e,t){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(e.gpuBuffer,t)},e.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},e.prototype.beginComputePass=function(e){K(null===this.gpuComputePassEncoder),this.frameCommandEncoder=e,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(e){var t=z(e.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(t)},e.prototype.setBindings=function(e){var t=this;e.gpuBindGroup.forEach(function(r,n){r&&t.gpuComputePassEncoder.setBindGroup(n,e.gpuBindGroup[n])})},e.prototype.pushDebugGroup=function(e){this.gpuComputePassEncoder.pushDebugGroup(e)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(e){this.gpuComputePassEncoder.insertDebugMarker(e)},e}(),tZ=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=e.call(this,{id:r,device:n})||this;o.type=a.ComputePipeline,o.gpuComputePipeline=null,o.descriptor=i;var s=i.program.computeStage;if(null===s)return o;var _={layout:"auto",compute:(0,X.Cl)({},s)};return o.gpuComputePipeline=o.device.device.createComputePipeline(_),void 0!==o.name&&(o.gpuComputePipeline.label=o.name),o}return(0,X.C6)(t,e),t.prototype.getBindGroupLayout=function(e){return this.gpuComputePipeline.getBindGroupLayout(e)},t}(tY),tQ=function(e){function t(t){var r,n,i,o,s=t.id,_=t.device,E=t.descriptor,u=e.call(this,{id:s,device:_})||this;u.type=a.InputLayout;var l=[];try{for(var R=(0,X.Ju)(E.vertexBufferDescriptors),c=R.next();!c.done;c=R.next()){var T=c.value,A=T.arrayStride,f=T.stepMode,p=T.attributes;l.push({arrayStride:A,stepMode:function(e){if(e===d.VERTEX)return"vertex";if(e===d.INSTANCE)return"instance";throw Error("whoops")}(f),attributes:[]});try{for(var h=(i=void 0,(0,X.Ju)(p)),S=h.next();!S.done;S=h.next()){var N=S.value,B=N.shaderLocation,C=N.format,F=N.offset;l[l.length-1].attributes.push({shaderLocation:B,format:function(e){if(e===U.U8_R||e===U.U8_RG)return"uint8x2";if(e===U.U8_RGB||e===U.U8_RGBA)return"uint8x4";if(e===U.U8_RG_NORM)return"unorm8x2";if(e===U.U8_RGBA_NORM)return"unorm8x4";if(e===U.S8_RGB_NORM)return"snorm8x4";else if(e===U.S8_RGBA_NORM)return"snorm8x4";else if(e===U.U16_RG_NORM)return"unorm16x2";else if(e===U.U16_RGBA_NORM)return"unorm16x4";else if(e===U.S16_RG_NORM)return"snorm16x2";else if(e===U.S16_RGBA_NORM)return"snorm16x4";else if(e===U.S16_RG)return"uint16x2";else if(e===U.F16_RG)return"float16x2";else if(e===U.F16_RGBA)return"float16x4";else if(e===U.F32_R)return"float32";else if(e===U.F32_RG)return"float32x2";else if(e===U.F32_RGB)return"float32x3";else if(e===U.F32_RGBA)return"float32x4";else throw"whoops"}(C),offset:F})}}catch(e){i={error:e}}finally{try{S&&!S.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=R.return)&&n.call(R)}finally{if(r)throw r.error}}return u.indexFormat=function(e){if(null!==e){if(e===U.U16_R)return"uint16";if(e===U.U32_R)return"uint32";throw Error("whoops")}}(E.indexBufferFormat),u.buffers=l,u}return(0,X.C6)(t,e),t}(tY),tj=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=e.call(this,{id:r,device:n})||this;return o.type=a.Program,o.vertexStage=null,o.fragmentStage=null,o.computeStage=null,o.descriptor=i,i.vertex&&(o.vertexStage=o.createShaderStage(i.vertex,"vertex")),i.fragment&&(o.fragmentStage=o.createShaderStage(i.fragment,"fragment")),i.compute&&(o.computeStage=o.createShaderStage(i.compute,"compute")),o}return(0,X.C6)(t,e),t.prototype.setUniformsLegacy=function(e){},t.prototype.createShaderStage=function(e,t){var r,n,i=e.glsl,a=e.wgsl,o=e.entryPoint,s=e.postprocess,_=a;if(!_)try{_=this.device.glsl_compile(i,t,!1)}catch(e){throw console.error(e,i),Error("whoops")}var E=function(e){if(!_.includes(e))return"continue";_=(_=_.replace("var T_".concat(e,": texture_2d<f32>;"),"var T_".concat(e,": texture_depth_2d;"))).replace(RegExp("textureSample\\(T_".concat(e,"(.*)\\);$"),"gm"),function(t,r){return"vec4<f32>(textureSample(T_".concat(e).concat(r,"), 0.0, 0.0, 0.0);")})};try{for(var u=(0,X.Ju)(["u_TextureFramebufferDepth"]),l=u.next();!l.done;l=u.next()){var R=l.value;E(R)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return s&&(_=s(_)),{module:this.device.device.createShaderModule({code:_}),entryPoint:o||"main"}},t}(tY),tJ=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=e.call(this,{id:r,device:n})||this;o.type=a.QueryPool;var s=i.elemCount,_=i.type;return o.querySet=o.device.device.createQuerySet({type:function(e){if(e===O.OcclusionConservative)return"occlusion";throw Error("whoops")}(_),count:s}),o.resolveBuffer=o.device.device.createBuffer({size:8*s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),o.cpuBuffer=o.device.device.createBuffer({size:8*s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),o.results=null,o}return(0,X.C6)(t,e),t.prototype.queryResultOcclusion=function(e){return null===this.results?null:this.results[e]!==BigInt(0)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},t}(tY),t$=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this,{id:r,device:n})||this;return i.type=a.Readback,i}return(0,X.C6)(t,e),t.prototype.readTexture=function(e,t,r,n,i,a,o,s){return void 0===o&&(o=0),(0,X.sH)(this,void 0,void 0,function(){var s,_,E,u,l,R,c;return(0,X.YH)(this,function(T){return l=(u=256*Math.ceil((E=Math.ceil(n/(_=tk((s=e).gpuTextureformat)).width)*_.length)/256))*i,R=this.device.createBuffer({usage:A.STORAGE|A.MAP_READ|A.COPY_DST,hint:f.STATIC,viewOrSize:l}),(c=this.device.device.createCommandEncoder()).copyTextureToBuffer({texture:s.gpuTexture,mipLevel:0,origin:{x:t,y:r,z:0}},{buffer:R.gpuBuffer,offset:0,bytesPerRow:u},{width:n,height:i,depthOrArrayLayers:1}),this.device.device.queue.submit([c.finish()]),[2,this.readBuffer(R,0,a.byteLength===l?a:null,o,l,s.format,!0,!1,E,u,i)]})})},t.prototype.readTextureSync=function(e,t,r,n,i,a,o,s){throw Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},t.prototype.readBuffer=function(e,t,r,n,i,a,o,s,_,E,u){var l=this;void 0===t&&(t=0),void 0===r&&(r=null),void 0===i&&(i=0),void 0===a&&(a=U.U8_RGB),void 0===o&&(o=!1),void 0===_&&(_=0),void 0===E&&(E=0),void 0===u&&(u=0);var R=i||e.size,c=r||e.view,T=c&&c.constructor&&c.constructor.BYTES_PER_ELEMENT||k(V(a)),d=e;if(!(e.usage&A.MAP_READ&&e.usage&A.COPY_DST)){var p=this.device.device.createCommandEncoder();d=this.device.createBuffer({usage:A.STORAGE|A.MAP_READ|A.COPY_DST,hint:f.STATIC,viewOrSize:R}),p.copyBufferToBuffer(e.gpuBuffer,t,d.gpuBuffer,0,R),this.device.device.queue.submit([p.finish()])}return new Promise(function(e,r){d.gpuBuffer.mapAsync(G.READ,t,R).then(function(){var r=d.gpuBuffer.getMappedRange(t,R),n=c;if(o)n=null===n?tV(a,R,!0,r):tV(a,n.buffer,void 0,r);else if(null===n)switch(T){case 1:(n=new Uint8Array(R)).set(new Uint8Array(r));break;case 2:n=l.getHalfFloatAsFloatRGBAArrayBuffer(R/2,r);break;case 4:(n=new Float32Array(R/4)).set(new Float32Array(r))}else switch(T){case 1:(n=new Uint8Array(n.buffer)).set(new Uint8Array(r));break;case 2:n=l.getHalfFloatAsFloatRGBAArrayBuffer(R/2,r,c);break;case 4:var i=c&&c.constructor||Float32Array;(n=new i(n.buffer)).set(new i(r))}if(_!==E){1!==T||o||(_*=2,E*=2);for(var s=new Uint8Array(n.buffer),A=_,f=0,p=1;p<u;++p){f=p*E;for(var h=0;h<_;++h)s[A++]=s[f++]}n=0===T||o?new Uint8Array(s.buffer,0,A):new Float32Array(s.buffer,0,A/4)}d.gpuBuffer.unmap(),e(n)},function(e){return r(e)})})},t.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(e,t,r){r||(r=new Float32Array(e));for(var n=new Uint16Array(t);e--;)r[e]=function(e){var t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*6103515625e-14*(n/1024):31==r?n?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+n/1024)}(n[e]);return r},t}(tY),t3=function(){function e(e){this.device=e,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getEncoder=function(){var e;return(null===(e=this.renderBundle)||void 0===e?void 0:e.renderBundleEncoder)||this.gpuRenderPassEncoder},e.prototype.getTextureView=function(e,t){return(K(t<e.mipLevelCount),1===e.mipLevelCount)?e.gpuTextureView:e.gpuTexture.createView({baseMipLevel:t,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(e){this.descriptor=e,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var t,r,n,i,a,o,s=e.colorAttachment.length;this.gfxColorAttachment.length=s,this.gfxColorResolveTo.length=s;for(var _=0;_<e.colorAttachment.length;_++){var E=e.colorAttachment[_],u=e.colorResolveTo[_];if(null===E&&null!==u&&(E=u,u=null),this.gfxColorAttachment[_]=E,this.gfxColorResolveTo[_]=u,this.gfxColorAttachmentLevel[_]=(null===(t=e.colorAttachmentLevel)||void 0===t?void 0:t[_])||0,this.gfxColorResolveToLevel[_]=(null===(r=e.colorResolveToLevel)||void 0===r?void 0:r[_])||0,null!==E){void 0===this.gpuColorAttachments[_]&&(this.gpuColorAttachments[_]={});var l=this.gpuColorAttachments[_];l.view=this.getTextureView(E,(null===(n=this.gfxColorAttachmentLevel)||void 0===n?void 0:n[_])||0);var R=null!==(a=null===(i=e.colorClearColor)||void 0===i?void 0:i[_])&&void 0!==a?a:"load";"load"===R?l.loadOp="load":(l.loadOp="clear",l.clearValue=R),l.storeOp=(null===(o=e.colorStore)||void 0===o?void 0:o[_])?"store":"discard",l.resolveTarget=void 0,null!==u&&(E.sampleCount>1?l.resolveTarget=this.getTextureView(u,this.gfxColorResolveToLevel[_]):l.storeOp="store")}else{this.gpuColorAttachments.length=_,this.gfxColorAttachment.length=_,this.gfxColorResolveTo.length=_;break}}if(this.gfxDepthStencilAttachment=e.depthStencilAttachment,this.gfxDepthStencilResolveTo=e.depthStencilResolveTo,e.depthStencilAttachment){var c=e.depthStencilAttachment,l=this.gpuDepthStencilAttachment;l.view=c.gpuTextureView,255&c.format&M.Depth?("load"===e.depthClearValue?l.depthLoadOp="load":(l.depthLoadOp="clear",l.depthClearValue=e.depthClearValue),e.depthStencilStore||null!==this.gfxDepthStencilResolveTo?l.depthStoreOp="store":l.depthStoreOp="discard"):(l.depthLoadOp=void 0,l.depthStoreOp=void 0),255&c.format&M.Stencil?("load"===e.stencilClearValue?l.stencilLoadOp="load":(l.stencilLoadOp="clear",l.stencilClearValue=e.stencilClearValue),e.depthStencilStore||null!==this.gfxDepthStencilResolveTo?l.stencilStoreOp="store":l.stencilStoreOp="discard"):(l.stencilLoadOp=void 0,l.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,b.A)(e.occlusionQueryPool)?void 0:e.occlusionQueryPool.querySet},e.prototype.beginRenderPass=function(e,t){K(null===this.gpuRenderPassEncoder),this.setRenderPassDescriptor(t),this.frameCommandEncoder=e,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(e,t){return this.device.swapChainHeight-e-t},e.prototype.setViewport=function(e,t,r,n,i,a){void 0===i&&(i=0),void 0===a&&(a=1),this.gpuRenderPassEncoder.setViewport(e,this.flipY(t,n),r,n,i,a)},e.prototype.setScissorRect=function(e,t,r,n){this.gpuRenderPassEncoder.setScissorRect(e,this.flipY(t,n),r,n)},e.prototype.setPipeline=function(e){var t=z(e.gpuRenderPipeline);this.getEncoder().setPipeline(t)},e.prototype.setVertexInput=function(e,t,r){if(null!==e){var n=this.getEncoder();null!==r&&n.setIndexBuffer(ty(r.buffer),z(e.indexFormat),r.offset);for(var i=0;i<t.length;i++){var a=t[i];null!==a&&n.setVertexBuffer(i,ty(a.buffer),a.offset)}}},e.prototype.setBindings=function(e){var t=this.getEncoder();e.gpuBindGroup.forEach(function(r,n){r&&t.setBindGroup(n,e.gpuBindGroup[n])})},e.prototype.setStencilReference=function(e){this.gpuRenderPassEncoder.setStencilReference(e)},e.prototype.draw=function(e,t,r,n){this.getEncoder().draw(e,t,r,n)},e.prototype.drawIndexed=function(e,t,r,n,i){this.getEncoder().drawIndexed(e,t,r,n,i)},e.prototype.drawIndirect=function(e,t){this.getEncoder().drawIndirect(ty(e),t)},e.prototype.drawIndexedIndirect=function(e,t){this.getEncoder().drawIndexedIndirect(ty(e),t)},e.prototype.beginOcclusionQuery=function(e){this.gpuRenderPassEncoder.beginOcclusionQuery(e)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(e){this.gpuRenderPassEncoder.pushDebugGroup(e)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(e){this.gpuRenderPassEncoder.insertDebugMarker(e)},e.prototype.beginBundle=function(e){this.renderBundle=e},e.prototype.endBundle=function(){this.renderBundle.finish()},e.prototype.executeBundles=function(e){this.gpuRenderPassEncoder.executeBundles(e.map(function(e){return e.renderBundle}))},e.prototype.finish=function(){var e;null===(e=this.gpuRenderPassEncoder)||void 0===e||e.end(),this.gpuRenderPassEncoder=null;for(var t=0;t<this.gfxColorAttachment.length;t++){var r=this.gfxColorAttachment[t],n=this.gfxColorResolveTo[t];null!==r&&null!==n&&1===r.sampleCount&&this.copyAttachment(n,this.gfxColorAttachmentLevel[t],r,this.gfxColorResolveToLevel[t])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},e.prototype.copyAttachment=function(e,t,r,n){K(1===r.sampleCount);var i={texture:r.gpuTexture,mipLevel:n},a={texture:e.gpuTexture,mipLevel:t};K(r.width>>>n==e.width>>>t),K(r.height>>>n==e.height>>>t),K(!!(r.usage&v.COPY_SRC)),K(!!(e.usage&v.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(i,a,[e.width,e.height,1])},e}(),t0=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=e.call(this,{id:r,device:n})||this;return o.type=a.RenderPipeline,o.isCreatingAsync=!1,o.gpuRenderPipeline=null,o.descriptor=i,o.device.createRenderPipelineInternal(o,!1),o}return(0,X.C6)(t,e),t.prototype.getBindGroupLayout=function(e){return this.gpuRenderPipeline.getBindGroupLayout(e)},t}(tY),t1=function(e){function t(t){var r,n,i=t.id,o=t.device,s=t.descriptor,_=e.call(this,{id:i,device:o})||this;_.type=a.Sampler;var E=s.lodMinClamp,u=s.mipmapFilter===c.NO_MIP?s.lodMinClamp:s.lodMaxClamp,l=null!==(r=s.maxAnisotropy)&&void 0!==r?r:1;return l>1&&K(s.minFilter===R.BILINEAR&&s.magFilter===R.BILINEAR&&s.mipmapFilter===c.LINEAR),_.gpuSampler=_.device.device.createSampler({addressModeU:tG(s.addressModeU),addressModeV:tG(s.addressModeV),addressModeW:tG(null!==(n=s.addressModeW)&&void 0!==n?n:s.addressModeU),lodMinClamp:E,lodMaxClamp:u,minFilter:tb(s.minFilter),magFilter:tb(s.magFilter),mipmapFilter:function(e){if(e===c.LINEAR)return"linear";if(e===c.NEAREST||e===c.NO_MIP)return"nearest";throw Error("whoops")}(s.mipmapFilter),compare:void 0!==s.compareFunction?tW(s.compareFunction):void 0,maxAnisotropy:l}),_}return(0,X.C6)(t,e),t}(tY),t2=function(e){function t(t){var r=t.id,n=t.device,i=t.descriptor,o=t.skipCreate,s=t.sampleCount,_=e.call(this,{id:r,device:n})||this;_.type=a.Texture,_.flipY=!1;var E=i.format,u=i.dimension,l=i.width,R=i.height,c=i.depthOrArrayLayers,T=i.mipLevelCount,A=i.usage,f=i.pixelStore;return _.flipY=!!(null==f?void 0:f.unpackFlipY),_.device.createTextureShared({format:E,dimension:null!=u?u:h.TEXTURE_2D,width:l,height:R,depthOrArrayLayers:null!=c?c:1,mipLevelCount:null!=T?T:1,usage:A,sampleCount:null!=s?s:1},_,o),_}return(0,X.C6)(t,e),t.prototype.textureFromImageBitmapOrCanvas=function(e,t,r){for(var n=t[0].width,i=t[0].height,a={size:{width:n,height:i,depthOrArrayLayers:r},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},o=e.createTexture(a),s=0;s<t.length;s++)e.queue.copyExternalImageToTexture({source:t[s],flipY:this.flipY},{texture:o,origin:[0,0,s]},[n,i]);return[o,n,i]},t.prototype.isImageBitmapOrCanvases=function(e){var t=e[0];return t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof OffscreenCanvas},t.prototype.isVideo=function(e){return e[0]instanceof HTMLVideoElement},t.prototype.setImageData=function(e,t){var r,n,i,a,o=this,s=this.device.device;if(this.isImageBitmapOrCanvases(e))n=(r=(0,X.zs)(this.textureFromImageBitmapOrCanvas(s,e,this.depthOrArrayLayers),3))[0],i=r[1],a=r[2];else if(this.isVideo(e))n=s.importExternalTexture({source:e[0]});else{var _=tk(this.gpuTextureformat),E=Math.ceil(this.width/_.width)*_.length;e.forEach(function(e){s.queue.writeTexture({texture:o.gpuTexture},e,{bytesPerRow:E},{width:o.width,height:o.height})})}this.width=i,this.height=a,n&&(this.gpuTexture=n),this.gpuTextureView=this.gpuTexture.createView({dimension:function(e){if(e===h.TEXTURE_2D)return"2d";if(e===h.TEXTURE_CUBE_MAP)return"cube";if(e===h.TEXTURE_2D_ARRAY)return"2d-array";if(e===h.TEXTURE_3D)return"3d";throw Error("whoops")}(this.dimension)})},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},t}(tY),t6=function(e){function t(t){var r=t.id,n=t.device,i=e.call(this,{id:r,device:n})||this;return i.type=a.RenderBundle,i.renderBundleEncoder=i.device.device.createRenderBundleEncoder({colorFormats:[i.device.swapChainFormat]}),i}return(0,X.C6)(t,e),t.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},t}(tY),t8=function(){function e(e,t,r,n,i,a){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=v.RENDER_ATTACHMENT|v.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=F.UPPER_LEFT,this.clipSpaceNearZ=g.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=t,this.canvas=r,this.canvasContext=n,this.glsl_compile=i,this.WGSLComposer=a,this.fallbackTexture2D=this.createFallbackTexture(h.TEXTURE_2D,C.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(h.TEXTURE_2D,C.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(h.TEXTURE_2D_ARRAY,C.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(h.TEXTURE_3D,C.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(h.TEXTURE_CUBE_MAP,C.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:l.REPEAT,addressModeV:l.REPEAT,minFilter:R.POINT,magFilter:R.POINT,mipmapFilter:c.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:l.REPEAT,addressModeV:l.REPEAT,minFilter:R.POINT,magFilter:R.POINT,mipmapFilter:c.NEAREST,compareFunction:o.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(e){console.error(e.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(e,t){(this.swapChainWidth!==e||this.swapChainHeight!==t)&&(this.swapChainWidth=e,this.swapChainHeight=t)},e.prototype.getOnscreenTexture=function(){var e=this.canvasContext.getCurrentTexture(),t=e.createView(),r=new t2({id:0,device:this,descriptor:{format:U.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:h.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return r.depthOrArrayLayers=1,r.sampleCount=1,r.gpuTexture=e,r.gpuTextureView=t,r.name="Onscreen",this.setResourceName(r,"Onscreen Texture"),r},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){K(0===this.frameCommandEncoderPool.length)},e.prototype.endFrame=function(){K(this.frameCommandEncoderPool.every(function(e){return null!==e})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(e){return e.finish()})),this.frameCommandEncoderPool=[]},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(e){return new tz({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createTexture=function(e){return new t2({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createSampler=function(e){return new t1({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderTarget=function(e){var t=new t2({id:this.getNextUniqueId(),device:this,descriptor:(0,X.Cl)((0,X.Cl)({},e),{dimension:h.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:S.RENDER_TARGET}),sampleCount:e.sampleCount});return t.depthOrArrayLayers=1,t.type=a.RenderTarget,t},e.prototype.createRenderTargetFromTexture=function(e){var t=e.format,r=e.width,n=e.height,i=e.depthOrArrayLayers,a=e.sampleCount,o=e.mipLevelCount,s=e.gpuTexture,_=e.gpuTextureView,E=e.usage;K(!!(E&v.RENDER_ATTACHMENT));var u=new t2({id:this.getNextUniqueId(),device:this,descriptor:{format:t,width:r,height:n,depthOrArrayLayers:i,dimension:h.TEXTURE_2D,mipLevelCount:o,usage:E},skipCreate:!0});return u.depthOrArrayLayers=i,u.sampleCount=a,u.gpuTexture=s,u.gpuTextureView=_,u},e.prototype.createProgram=function(e){var t,r;return(null===(t=e.vertex)||void 0===t?void 0:t.glsl)&&(e.vertex.glsl=ej(this.queryVendorInfo(),"vert",e.vertex.glsl)),(null===(r=e.fragment)||void 0===r?void 0:r.glsl)&&(e.fragment.glsl=ej(this.queryVendorInfo(),"frag",e.fragment.glsl)),new tj({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createProgramSimple=function(e){return new tj({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createTextureShared=function(e,t,r){var n,i,a={width:e.width,height:e.height,depthOrArrayLayers:e.depthOrArrayLayers},o=e.mipLevelCount,s=tv(e.format),_=function(e){if(e===h.TEXTURE_2D||e===h.TEXTURE_CUBE_MAP||e===h.TEXTURE_2D_ARRAY)return"2d";if(e===h.TEXTURE_3D)return"3d";throw Error("whoops")}(e.dimension),E=(n=e.usage,i=0,n&S.SAMPLED&&(i|=v.TEXTURE_BINDING|v.COPY_DST|v.COPY_SRC),n&S.STORAGE&&(i|=v.TEXTURE_BINDING|v.STORAGE_BINDING|v.COPY_SRC|v.COPY_DST),n&S.RENDER_TARGET&&(i|=v.RENDER_ATTACHMENT|v.TEXTURE_BINDING|v.COPY_SRC|v.COPY_DST),i);if(t.gpuTextureformat=s,t.dimension=e.dimension,t.format=e.format,t.width=e.width,t.height=e.height,t.depthOrArrayLayers=e.depthOrArrayLayers,t.mipLevelCount=o,t.usage=E,t.sampleCount=e.sampleCount,!r){var u=this.device.createTexture({size:a,mipLevelCount:o,format:s,dimension:_,sampleCount:e.sampleCount,usage:E}),l=u.createView();t.gpuTexture=u,t.gpuTextureView=l}},e.prototype.getFallbackSampler=function(e){return e.formatKind===C.Depth&&e.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(e){var t=e.dimension,r=e.formatKind;if(t===h.TEXTURE_2D)return r===C.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(t===h.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(t===h.TEXTURE_3D)return this.fallbackTexture3D;if(t===h.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw Error("whoops")},e.prototype.createFallbackTexture=function(e,t){var r=e===h.TEXTURE_CUBE_MAP?6:1,n=t===C.Float?U.U8_RGBA_NORM:U.D24;return this.createTexture({dimension:e,format:n,usage:S.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1})},e.prototype.createBindings=function(e){return new tK({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createInputLayout=function(e){return new tQ({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createComputePipeline=function(e){return new tZ({id:this.getNextUniqueId(),device:this,descriptor:e})},e.prototype.createRenderPipeline=function(e){return new t0({id:this.getNextUniqueId(),device:this,descriptor:(0,X.Cl)({},e)})},e.prototype.createQueryPool=function(e,t){return new tJ({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:t}})},e.prototype.createRenderPipelineInternal=function(e,t){if(null===e.gpuRenderPipeline){var r,n=e.descriptor,i=n.program,a=i.vertexStage,o=i.fragmentStage;if(null!==a&&null!==o){var E,u,l,R=n.megaStateDescriptor||{},c=R.stencilBack,A=R.stencilFront,f=(0,X.Tt)(R,["stencilBack","stencilFront"]),d=es(eE);n.megaStateDescriptor=(0,X.Cl)((0,X.Cl)((0,X.Cl)({},d),{stencilBack:(0,X.Cl)((0,X.Cl)({},d.stencilBack),c),stencilFront:(0,X.Cl)((0,X.Cl)({},d.stencilFront),A)}),f);var p=n.megaStateDescriptor.attachmentsState[0];n.colorAttachmentFormats.forEach(function(e,t){n.megaStateDescriptor.attachmentsState[t]||(n.megaStateDescriptor.attachmentsState[t]=ea(void 0,p))});var h=(E=null!==(r=n.topology)&&void 0!==r?r:T.TRIANGLES,u=n.megaStateDescriptor,{topology:function(e){switch(e){case T.TRIANGLES:return"triangle-list";case T.POINTS:return"point-list";case T.TRIANGLE_STRIP:return"triangle-strip";case T.LINES:return"line-list";case T.LINE_STRIP:return"line-strip";default:throw Error("Unknown primitive topology mode")}}(E),cullMode:function(e){if(e===_.NONE)return"none";if(e===_.FRONT)return"front";if(e===_.BACK)return"back";throw Error("whoops")}(u.cullMode),frontFace:function(e){if(e===s.CCW)return"ccw";if(e===s.CW)return"cw";throw Error("whoops")}(u.frontFace)}),S=(l=n.colorAttachmentFormats,n.megaStateDescriptor.attachmentsState.map(function(e,t){return{format:tv(l[t]),blend:function(e){if(!(tw(e.rgbBlendState)&&tw(e.alphaBlendState)))return{color:tX(e.rgbBlendState),alpha:tX(e.alphaBlendState)}}(e),writeMask:e.channelWriteMask}})),N=function(e,t){if(!(0,b.A)(e))return{format:tv(e),depthWriteEnabled:!!t.depthWrite,depthCompare:tW(t.depthCompare),depthBias:t.polygonOffset?t.polygonOffsetUnits:0,depthBiasSlopeScale:t.polygonOffset?t.polygonOffsetFactor:0,stencilFront:{compare:tW(t.stencilFront.compare),passOp:tH(t.stencilFront.passOp),failOp:tH(t.stencilFront.failOp),depthFailOp:tH(t.stencilFront.depthFailOp)},stencilBack:{compare:tW(t.stencilBack.compare),passOp:tH(t.stencilBack.passOp),failOp:tH(t.stencilBack.failOp),depthFailOp:tH(t.stencilBack.depthFailOp)},stencilReadMask:0xffffffff,stencilWriteMask:0xffffffff}}(n.depthStencilAttachmentFormat,n.megaStateDescriptor),B=void 0;null!==n.inputLayout&&(B=n.inputLayout.buffers);var C=n.sampleCount,F={layout:"auto",vertex:(0,X.Cl)((0,X.Cl)({},a),{buffers:B}),primitive:h,depthStencil:N,multisample:{count:C},fragment:(0,X.Cl)((0,X.Cl)({},o),{targets:S})};e.gpuRenderPipeline=this.device.createRenderPipeline(F)}}},e.prototype.createReadback=function(){return new t$({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderBundle=function(){return new t6({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(e){var t=this.renderPassPool.pop();void 0===t&&(t=new t3(this));var r=this.frameCommandEncoderPool.pop();return void 0===r&&(r=this.device.createCommandEncoder()),t.beginRenderPass(r,e),t},e.prototype.createComputePass=function(){var e=this.computePassPool.pop();void 0===e&&(e=new tq);var t=this.frameCommandEncoderPool.pop();return void 0===t&&(t=this.device.createCommandEncoder()),e.beginComputePass(t),e},e.prototype.submitPass=function(e){e instanceof t3?(this.frameCommandEncoderPool.push(e.frameCommandEncoder),e.finish(),this.renderPassPool.push(e)):e instanceof tq&&(this.frameCommandEncoderPool.push(e.frameCommandEncoder),e.finish(),this.computePassPool.push(e))},e.prototype.copySubTexture2D=function(e,t,r,n,i,a,o){var s=this.device.createCommandEncoder(),_={texture:n.gpuTexture,origin:[i,a,0],mipLevel:0,aspect:"all"},E={texture:e.gpuTexture,origin:[t,r,0],mipLevel:0,aspect:"all"};K(!!(n.usage&v.COPY_SRC)),K(!!(e.usage&v.COPY_DST)),s.copyTextureToTexture(_,E,[n.width,n.height,o||1]),this.device.queue.submit([s.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(e,t,r){if(function(e){switch(V(e)){case m.BC1:case m.BC2:case m.BC3:case m.BC4_SNORM:case m.BC4_UNORM:case m.BC5_SNORM:case m.BC5_UNORM:return!0;default:return!1}}(e)){if(!this.featureTextureCompressionBC)return!1;var n=function(e){switch(V(e)){case m.BC1:case m.BC2:case m.BC3:case m.BC4_SNORM:case m.BC4_UNORM:case m.BC5_SNORM:case m.BC5_UNORM:return 4;default:return 1}}(e);return t%n==0&&r%n==0&&this.featureTextureCompressionBC}switch(e){case U.U16_RGBA_NORM:case U.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(e){return e.descriptor},e.prototype.queryRenderTarget=function(e){return e},e.prototype.setResourceName=function(e,t){if(e.name=t,e.type===a.Buffer){var r=e;r.gpuBuffer.label=t}else if(e.type===a.Texture){var r=e;r.gpuTexture.label=t,r.gpuTextureView.label=t}else if(e.type===a.RenderTarget){var r=e;r.gpuTexture.label=t,r.gpuTextureView.label=t}else if(e.type===a.Sampler){var r=e;r.gpuSampler.label=t}else if(e.type===a.RenderPipeline){var r=e;null!==r.gpuRenderPipeline&&(r.gpuRenderPipeline.label=t)}},e.prototype.setResourceLeakCheck=function(e,t){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(e){},e.prototype.pipelineQueryReady=function(e){return null!==e.gpuRenderPipeline},e.prototype.pipelineForceReady=function(e){this.createRenderPipelineInternal(e,!1)},e}(),t4=function(){function e(e){this.pluginOptions=e}return e.prototype.createSwapChain=function(e){return(0,X.sH)(this,void 0,void 0,function(){var t,r,n,i,a,o;return(0,X.YH)(this,function(s){switch(s.label){case 0:if(void 0===globalThis.navigator.gpu)return[2,null];t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),r=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:r})];case 2:return t=s.sent(),[3,4];case 3:return console.log(s.sent()),[3,4];case 4:if(null===t)return[2,null];return n=["depth32float-stencil8","texture-compression-bc","float32-filterable"].filter(function(e){return t.features.has(e)}),[4,t.requestDevice({requiredFeatures:n})];case 5:if((i=s.sent())&&(a=this.pluginOptions.onContextLost,i.lost.then(function(){a&&a()})),null===i||!(o=e.getContext("webgpu")))return[2,null];s.label=6;case 6:return s.trys.push([6,8,,9]),[4,tP(this.pluginOptions.shaderCompilerPath)];case 7:case 8:return s.sent(),[3,9];case 9:return[2,new t8(t,i,e,o,tU,tL&&new tL)]}})})},e}()}}]);